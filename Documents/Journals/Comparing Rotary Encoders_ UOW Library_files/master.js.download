var ep = window.ep || {}; ep.bundles = ep.bundles || []; ep.bundles = ep.bundles.concat('bundled/eds/master.js','ep/lib/pt-bones.js', 'ep/common/common.js', 'ep/jqueryplugins/absolutize.js', 'ep/modaldialog.js', 'ep/widgets/uidialog.js', 'ep/widgets/epmodal.js', 'ep/widgets/eppopup.js', 'ep/widgets/dropdown.js', 'ep/epdialog.js', 'ep/common/customevents.js', 'ep/common/displayutilities.js', 'ep/common/keyevent.js', 'ep/controller/control/simplemenu.js', 'ep/common/popupwin.js', 'ep/utilities.js', 'ep/extension/number.js', 'ep/updatefolder.js', 'ep/ep.js', 'ep/util/globalloader.js', 'ep/util/jtemplateparser.js', 'ep/util/json.js', 'json2/json2.js', 'ep/util/iframe.js', 'ep/base/controller.js', 'ep/base/pagecontroller.js', 'ep/base/modulecontroller.js', 'ep/manager/clientstatemanager.js', 'ep/util/expandcollapse.js', 'ep/controller/collapsiblecontroller.js', 'ep/controller/control/optionscontrolsdropdowns.js', 'jqueryplaceholder/jquery.placeholder.js', 'jqueryplaceholder/placeholder.js', 'ep/jqueryplugins/xdr.js', 'ep/jqueryplugins/corsfallback.js', 'ep/util/formsubmit.js', 'ep/util/xpathevaluatorfallback.js', 'ep/util/googletagmanagerloader.js', 'ep/util/url.js', 'ep/controller/control/customerlogo.js', 'jquery/plugins/jquery.validate-1.9.0.js', 'ep/jqueryplugins/jqueryvalidate_ep.js', 'ep/jqueryplugins/whitespace.js');
(function(){var c=Array.prototype.slice;var a=(function(){function g(j,i){var k=j.length,l=i.length;while(l--){j[k+l]=i[l];}return j;}function f(j,i){j=c.call(j,0);return g(j,i);}function e(k){if(arguments.length<2&&(typeof arguments[0])==="undefined"){return this;}var i=this,j=c.call(arguments,1);return function(){var l=f(j,arguments);return i.apply(k,l);};}function h(j){var i=this;return function(){var k=g([i.pt_bind(this)],arguments);return j.apply(this,k);};}function d(){var i=this.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");return i.length===1&&!i[0]?[]:i;}return{pt_bind:e,argumentNames:d,wrap:h};})();for(var b in a){if(a.hasOwnProperty(b)){Function.prototype[b]=a[b];}}})();var Class=(function(){var d=(function(){for(var i in {toString:1}){if(i==="toString"){return false;}}return true;})();function g(){}function c(){var m=null,n=Array.prototype.slice.call(arguments);if(typeof n[0]==="function"){m=n.shift();}function k(){this.initialize.apply(this,arguments);}k.addMethods=Class.Methods.addMethods;k.superclass=m;k.subclasses=[];if(m){g.prototype=m.prototype;k.prototype=new g();m.subclasses.push(k);}for(var j=0,l=n.length;j<l;j++){k.addMethods(n[j]);}if(!k.prototype.initialize){k.prototype.initialize=Class.emptyFunction;}k.prototype.constructor=k;return k;}function a(p){var j=this.superclass&&this.superclass.prototype,n=(function(i){if(!i||(typeof i!=="object")){return;}var t=[];for(var s in i){if(i.hasOwnProperty(s)){t.push(s);}}return t;})(p);if(d){if(p.toString!==Object.prototype.toString){n.push("toString");}if(p.valueOf!==Object.prototype.valueOf){n.push("valueOf");}}function r(s,i){return function(){return s[i].apply(this,arguments);};}for(var k=0,l=n.length;k<l;k++){var o=n[k],q=p[o];if(j&&typeof q==="function"&&q.argumentNames()[0]==="$super"){var m=q;q=r(j,o).wrap(m);q.valueOf=b(m.valueOf,m);q.toString=b(m.toString,m);}this.prototype[o]=q;}return this;}var f=Array.prototype.slice;function h(j,i){var k=j.length,l=i.length;while(l--){j[k+l]=i[l];}return j;}function e(j,i){j=f.call(j,0);return h(j,i);}function b(l,k){if(arguments.length<2&&(typeof arguments[0]==="undefined")){return l;}var i=l,j=f.call(arguments,1);return function(){var m=e(j,arguments);return i.apply(k,m);};}return{create:c,emptyFunction:function(){return;},Methods:{addMethods:a}};})();(function(){function a(d,f){if(!(f=f.split("="))[0]){return;}var e=decodeURIComponent(f.shift()),g=f.length>1?f.join("="):f[0];if(g!==undefined){g=decodeURIComponent(g);}if(e in d){if(Object.prototype.toString.call(d[e])!=="[object Array]"){d[e]=[d[e]];}d[e].push(g);}else{d[e]=g;}return d;}var c=(function(){function d(){return this.replace(/^\s+/,"").replace(/\s+$/,"");}function e(k){var j=this.strip().match(/([^?#]*)(#.*)?$/),g={},h=0;if(!j){return{};}j=j[1].split(k||"&");h=j.length;while(h--){g=a(g,j[h]);}return g;}function f(g){return this.length>g?this.substr(0,g-1)+"&hellip;":this;}return{toQueryParams:e,strip:d,truncate:f};})();for(var b in c){if(c.hasOwnProperty(b)){String.prototype[b]=c[b];}}})();if(!window.ep){ep=function(){return{version:1};}();}if(!ep.messages){ep.messages={};}ep.InternetExplorerVersion=function(){var a=null;var b=navigator.appVersion.match(/MSIE ([\d\.]+)/);if(b){a=parseFloat(b[1]);}return a;}();ep.ie6SelectFix=function(a){if(ep.InternetExplorerVersion!==6){return;}if(!ep.selects||!ep.selects.length){ep.selects=jQuery("select");}if(a){ep.selects.removeClass("hide");}else{ep.selects.addClass("hide");}};var debug_mode=false;function getXmlHttpObject(){var a=null;if(window.XMLHttpRequest){a=new XMLHttpRequest();}else{if(window.ActiveXObject){a=new ActiveXObject("Microsoft.XMLHTTP");if(!a){a=new ActiveXObject("Msxml2.XMLHTTP");}}}return a;}ep.isAjaxEnabled=function(){var c=false;if(document.forms.length>0){var d=getXmlHttpObject();c=d?true:false;var b=c?"enabled":"disabled";var a=document.createElement("input");a.type="hidden";a.id="ajax";a.name="ajax";a.value=b;if(document.forms.length>0){document.forms[0].appendChild(a);}}return c;}();function errorHandler(){if(debug_mode){var a="ERROR: "+arguments[0];a+=arguments[1]?"\nURL: "+arguments[1]:"";a+=arguments[2]?"\nLINE: "+arguments[2]:"";alert(a);}}if(debug_mode){window.onerror=errorHandler;}function getClientId(c,b){var a=null;if(c&&c!==""){if(c.indexOf(b)>-1){a=c.split(b)[c.split(b).length-1];}else{a=c;}}return a;}var getElementByClientId=function(b,a){return jQuery(a).find('[id$="_'+b+'"]')[0];};function getPostBackForm(){return document.forms[0];}function getElementById(a){var b=document.getElementById(a);if(!b){b=getElementByClientId(a,(typeof(theForm)!=="undefined"&&theForm)?theForm:getPostBackForm());}return b;}ep.getScreenResolution=function(){var a=document.getElementById("__ScreenResolution");if(a){a.value=screen.width+" : "+screen.height;}};function getPostBackPage(b,c){var a=(b.action.length>0)?b.action:window.location.pathname+window.location.search;if(c){return((a.indexOf("?")>0)?a.split("?")[0]:a);}else{return(a);}}function getFormActionParams(b,a){return((b.action.indexOf("?")>0)?a+b.action.split("?")[1]:"");}function getPageName(a){if(!a){return"";}else{if(a.indexOf("?")>-1){return a.substring(0,a.indexOf("?"));}else{return a;}}}function getUpdatedFormAction(a,b){return getPageName(b)+getFormActionParams(a,"?");}function getFormActionWithUpdatedVID(b,c,d){var a=getFormActionParams(b,"");if(/^\d+$/.test(d)){a=a.replace(/vid=\d+/i,"vid="+d);}return(a!=="")?getPageName(c)+"?"+a:c;}function stopCurrentEvent(a){if(a){a.returnValue=false;if(a.cancelable){a.preventDefault();}}}function closePopup(a){var b=getElementByClientId("messageBox",getPostBackForm());if(b){b.style.visibility="hidden";}var c=document.getElementById("coverScreen");if(c){c.style.visibility="hidden";}if(typeof(aAjaxCallBack)!=="undefined"){if(aAjaxCallBack&&aAjaxCallBack.redirect&&aAjaxCallBack.redirect!==""&&!aAjaxCallBack.autoRedirect){aAjaxCallBack.redirectToPage(aAjaxCallBack.redirect);}}stopCurrentEvent(a);}function ClearTarget(){var a=document.getElementById("target");if(a){a.parentNode.removeChild(a);}return true;}ep.isPageRTL=function(){var a=/RTL/i;return(document.documentElement.dir.match(a)||_.isFunction(jQuery("</div>").bidi));};ep.togglePanel=function(h,g,i){var f=i==="openOnly"?true:false;var e=i==="closeOnly"?true:false;var a=jQuery("#"+g);if(!a.length){a=jQuery(getElementByClientId(g,getPostBackForm()));}var b=jQuery("#"+h);if(!b.length){b=jQuery(getElementByClientId(h,getPostBackForm()));}var c=h.indexOf("left")>0?"Left":"Right";var d=jQuery(getElementByClientId(c.toLowerCase()+"PanelState",getPostBackForm()));if(a.length&&b.length){if(a.hasClass("panels"+c+"Open")&&!f){a.removeClass("panels"+c+"Open");a.addClass("panels"+c+"Closed");b.title=ep.messages["show"+c+"Panel"];if(d.length){d.val("hidden");}}else{if(a.hasClass("panels"+c+"Closed")&&!e){a.removeClass("panels"+c+"Closed");a.addClass("panels"+c+"Open");b.title=ep.messages["hide"+c+"Panel"];if(d.length){d.val("visible");}}}}};ep.hidePanel=function(b,a){ep.togglePanel(b,a,"closeOnly");};ep.showPanel=function(b,a){ep.togglePanel(b,a,"openOnly");};function Mid(e,d,c){if(d<0||c<0){return"";}var a,b=String(e).length;if(d+c>b){a=b;}else{a=d+c;}return String(e).substring(d,a);}function onInputBoxKeyPress(b){var a=b?b:window.event;return onkeypress_event(a,"SearchButton");}ep.updateSearchMode=function(){var d=jQuery(),g,f=jQuery(),a,k,e=jQuery(),b,j,c;var n=null;var h=false;function i(){if(!k){k=true;var o=jQuery();var r=jQuery("#searchModeList");o=jQuery("#SearchTerm1, #Searchbox1");var p=jQuery("#FirstFindFieldIdHolder");if(o.length===0){if(p.length){o=jQuery("#"+p.val());}if(!o.length){return;}}h=o.is("[data-textclear]");n=o.data("textclear");if(r.length){d=r.find("input[type='radio']");d.bind("click",ep.updateSearchMode);}if(o.is("INPUT")){f=o;}else{if(o.is("TEXTAREA")){e=o;}}if(jQuery("#DbTag_1").length){b=jQuery("#DbTag_1, #LabelDbTag_1");}else{var s=jQuery("#FirstFindFieldTagIdHolder").val();var q=jQuery("#FirstFindFieldInLabelHolder").val();b=jQuery("#"+s+", #"+q);}p=jQuery("#FirstFindFieldRowMeasure");if(p.length){g=jQuery("#"+p.val()).width();}else{g=o.width();}a=o.parent();j=true;}}function l(){if(!e.length){e=jQuery("<textarea/>").attr({id:f.attr("id"),name:f.attr("name"),"class":f.attr("class"),placeholder:f.attr("placeholder"),"data-clear":"",rows:6,accesskey:2}).width(g).removeClass("placeholder").keypress(onInputBoxKeyPress);if(h){e.attr("data-textclear",f.attr("data-textclear"));}}b.hide();if(f.length){e.html(f.val());var o=false;if(f.data("textclearinstance")){o=true;f.textClear("destroy");}f.replaceWith(e);if(o){e.textClear();}e.removeClass("placeholder").placeholder();e.trigger("ep_searchModeUpdated");}}function m(){if(!f.length){f=jQuery("<input/>").attr({id:e.attr("id"),name:e.attr("name"),accesskey:2,size:b.length>0?28:53,"class":e.attr("class"),placeholder:e.attr("placeholder")}).removeClass("placeholder").keypress(onInputBoxKeyPress);if(h){f.attr("data-textclear",e.attr("data-textclear"));}if(b.length===0){f.width(g);}}if(!f.parent().length&&e.length){var o=false;if(e.data("textclearinstance")){o=true;e.textClear("destroy");}e.replaceWith(f);if(o){f.textClear();}f.removeClass("placeholder").placeholder();b.show();f.trigger("ep_searchModeUpdated");}}return function(){i();if(j!==true){return;}var o;if(d.length){o=d.filter(":checked").val();}else{var p=jQuery("#CurrentSearchMode");if(p.length){o=p.val();}}if(o==="Smart"){l();}else{if(c==="Smart"){m();}}c=o;};}();ep.showAllDbs=function(){var a=jQuery("#showAllLink"),b=jQuery("#extendedDatabases, #showLessLink");if(a.length){a.hide();}if(b.length){b.css("display","inline");}};ep.showLessDbs=function(){var b=jQuery("#showAllLink"),a=jQuery("#extendedDatabases, #showLessLink");if(b.length){b.show();}if(a.length){a.hide();}};function showHistoryTerm(g,h){var f=document.getElementById(g);var a=h?f:null;var c=h?null:f;var d=f.parentNode;while(d&&d.tagName.toUpperCase()!=="TD"){d=d.parentNode;}if(d){var b=getElementByClientId("fullterm",d);var e=getElementByClientId("truncterm",d);if(h){c=getElementByClientId("showless",d);b.style.display=c.style.display="inline";a.style.display=e.style.display="none";}else{a=getElementByClientId("ellipsis",d);b.style.display=c.style.display="none";e.style.display=a.style.display="inline";}}}function runAJAX(a,b){aFormAction=document.forms[0].action.toString().replace(/(\/*)[\w\d]*?(\?)/,"$1"+a+"$2");jQuery.ajax({type:"post",url:aFormAction,data:b});}function GoToArticle(a){window.location.href=ep.SyncFormVid(a);}ep.SyncFormVid=function(d){var e=/vid=(\d+)/.exec(d);if(e&&e.length===2){var c=parseInt(e[1],10);var a=document.getElementById("__vid");if(a&&/^\d+$/.test(a.value)){var b=parseInt(a.value,10);if(b===c+1){d=d.replace("vid="+c,"vid="+b);}}}return d;};ep.toggleThemes=function(f,c,e,d){var a=f.split(",");var b=jQuery("#"+a[0]).hasClass("hidden-theme")?d:e;jQuery("#"+c).text(b).attr("title",b);_.each(a,function(g){jQuery("#"+g).toggleClass("hidden-theme");});return false;};ep.URLEncode=function(a){a=encodeURIComponent(a);a=a.replace(/\+/g,"%2B");return a;};ep.URLDecode=function(a){a=a.replace(/\+/g," ");a=decodeURIComponent(a);return a;};ep.getUrlParam=function(d){var e=[],a;var b=window.location.search.slice(1).split("&");for(var c=0;c<b.length;c++){if(b[c].length>0){a=b[c].split("=");e.push(a[0]);e[a[0]]=a[1];}}return e[d];};ep.buildHostURL=function(){var a=window.location.protocol+"//"+window.location.host+window.location.pathname+"?vid="+ep.getUrlParam("vid")+"&sid="+ep.getUrlParam("sid");return a;};String.prototype.startsWith=function(a){return this.length>=a.length&&this.substr(0,a.length)===a;};String.prototype.endsWith=function(a){return this.length>=a.length&&this.substr(this.length-a.length)===a;};String.prototype.parseQuery=function(){var b=this.indexOf("?");var a=this.indexOf("#");var c=this;if(b>0){c=this.substring(b+1,a>0?a:this.length);}var e={};var g=c.split("&");for(var d=0;d<g.length;d++){var f=g[d].split("=");e[decodeURIComponent(f[0])]=decodeURIComponent(f[1]);}return e;};(function(){if(!Array.prototype.indexOf){Array.prototype.indexOf=function(c,d){for(var a=(d||0),b=this.length;a<b;a++){if(this[a]===c){return a;}}return -1;};}})();ep.require("jquery/plugins/jquery.ba-resize.js",function(){var a=function(g){var b=$("body"),i={},f,c=b,e=function(j,k){$(j).parentsUntil("html").css("height",k+"px");},d=function(j){$(".ui-widget-overlay").css("height",j+"px");$(".ui-dialog ").css("top","100px");$(window).scrollTop(0);},h=function(){if($(document).height()>$(window).height()){if(!$(".ui-widget-overlay").is(":visible")){i.pixelHeight=$(document).height();}else{i.pixelHeight=$("#innerContainer").height();}window.parent.postMessage(JSON.stringify(i),"*");e(c,i.pixelHeight);d(i.pixelHeight);}};if(b.hasClass("viewer")||b.hasClass("archive")||b.hasClass("ResponsiveEbook")||b.hasClass("ebook")){i.pixelHeight="sticky";}else{if($("#innerContainer").length){c=$("#innerContainer");f=c.height();i.pixelHeight=f;if(!g){$(".custom-widget").each(function(){var k=$(this).height(),j;$(this).on("resize",function(l){var m=$(this).height();j=m-k;if(j){k=m;i.pixelHeight=f+j;window.parent.postMessage(JSON.stringify(i),"*");e(c,i.pixelHeight);d(i.pixelHeight);f+=j;}});});}$(document).off("resize",h);$(document).on("resize",h);}else{i.pixelHeight=$(document).outerHeight(true);}}window.parent.postMessage(JSON.stringify(i),"*");if(i.pixelHeight!=="sticky"){e(c,i.pixelHeight);d(i.pixelHeight);}};$(document).ready(function(){if(window.top!==window.self){ep.subscribe("ep:ebook:unavailable:modal",function(){a(true);});a();}});});jQuery.fn.absolutize=function(){return this.each(function(){var a=jQuery(this);if(a.css("position")==="absolute"){return a;}var d=a.offset();var e=d.top;var c=d.left;var f=a[0].clientWidth;var b=a[0].clientHeight;a._originalLeft=c-parseFloat(a.css("left")||0);a._originalTop=e-parseFloat(a.css("top")||0);a._originalWidth=a.css("width");a._originalHeight=a.css("height");a.css("position","absolute");a.css("top",e+"px");a.css("left",c+"px");a.css("width",f+"px");a.css("height",b+"px");return a;});};(function(a){if(!ep.dialog){ep.dialog=function(){return{version:1};}();}ep.dialog.ModalDialog=Class.create({content:"",initialize:function(d,c){d=a(d);if(ep.dialog.HoverPopup){ep.dialog.HoverPopup.hideHover();}if(d.length){var b=a.proxy(this.show,this);a(d).click(function(){b();return false;});this.$trigger=d;}else{this.$trigger=a([]);}if(c){_.extend(this,c);}},initDisplay:function(){var f=document.body.appendChild(a("<div waiRole='dialog'>").get(0));f.className="modal-dialog";if(this.cssClass){a(f).addClass(this.cssClass);}a(f).css({display:"none"});var b=a("<span tabIndex='0' class='ui-icon ui-icon-closethick'><span>Close</span></span>");a(f).append(b);b.on("click",a.proxy(this.hide,this));var e=a.proxy(function(h){this.handleCloseKeyPress(h);},this);b.on("keydown",e);var c=a("<div class='modal-content'>");a(f).append(c);var d=a("<span tabIndex='0' class='modal-tab-end'>").html(" ");a(f).append(d);var g=a.proxy(function(){this.display.container.firstChild.focus();},this);d.on("focus",g);this.display={container:f,closeElement:b.get(0),contentElement:c.get(0)};},show:function(){if(!this.previousAspForm&&window.theForm){this.previousAspForm=theForm;}if(!this.display){this.initDisplay();}this.displayLoadDialog();if(!this.$coverScreen){this.$coverScreen=a("#modal-screen");}if(!this.$coverScreen.is(":visible")){this.layoutScreen();this.$coverScreen.fadeTo("normal",0.5);}if(this.content){this.render();}else{if(this.command&&!this.href){var c=window.location.href.replace(/\/\w+\?/,"/"+this.command+"?");c=c.split("#")[0];var d=document.getElementById("__vid").value;if(d){c=c.replace(/vid=\d+/,"vid="+d);}this.href=c;}if(this.href){var b=a.proxy(function(e){this.render(e);},this);a.ajax(this.href,{type:"get",success:function(e){b(e);},error:function(){b("We're sorry, an error occurred.");}});}else{this.render("An error has occurred and there is nothing to display");}}},render:function(c){a(this.$loadDialog).stop(true,true).fadeOut("normal");if(c){var b=c.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(b){this.content=b[1];}else{this.content=c;}}a(this.display.contentElement).html(this.content);this.layout();a(this.display.container).fadeIn("normal",a.proxy(this.renderComplete,this));this.childForms=a(this.display.contentElement).find("form");if(window.theForm&&this.childForms.length>0){window.theForm=this.childForms.get(0);}this.childForms.each(a.proxy(function(e,d){d.dialog=this;if(_.isFunction(this.onSubmit)){a(d).on("submit",this.onSubmit);}},this));if(_.isFunction(this.onRender)){this.onRender();}},renderComplete:function(){this.focusTitle();a(this.$loadDialog).fadeOut("normal");},focusTitle:function(){if(_.isString(this.titleElement)){var b=a(this.display.contentElement).find(this.titleElement).get(0);if(b){b.tabIndex=0;b.focus();}}},layout:function(){if(this.display){a(this.display.container).css({position:"absolute",top:"-10000px",left:"0px",display:"block"});var c={width:a(this.display.container).outerWidth(),height:a(this.display.container).outerHeight()};var b={width:a(window).outerWidth(),height:a(window).outerHeight()};var d={left:a(window).scrollLeft(),top:a(window).scrollTop()};a(this.display.container).hide();var e=d.top+10;if(c.height<b.height){e=d.top+b.height/2-c.height/2;}a(this.display.container).css({top:e+"px",left:(d.left+b.width/2-c.width/2)+"px"});a(this.display.closeElement).absolutize();}},displayLoadDialog:function(b){if(!b){b="Loading ...";}if(!this.$loadDialog){this.$loadDialog=a("<div tabIndex='0' class='modal-loading'>");this.$loadDialog.css({position:"absolute"});}this.$loadDialog.html(b);a(document.body).append(this.$loadDialog);this.$loadDialog.css({top:"-1000px",left:"0px"});this.$loadDialog.toggle("pulsate");},layoutScreen:function(){if(this.display){if(!this.$coverScreen){this.$coverScreen=a("#modal-screen");}if(!this.$coverScreen.length){this.$coverScreen=a("<div id='modal-screen' class='modal-screen'>");this.$coverScreen.hide();}a(this.$coverScreen).insertBefore(this.display.container);var e={width:a(window).outerWidth(),height:a(window).outerHeight()};var d={left:a(window).scrollLeft(),top:a(window).scrollTop()};var c={height:document.documentElement.scrollHeight,width:document.documentElement.scrollWidth};c.height=c.height>e.height?c.height:e.height;c.width=c.width>e.width?c.width:e.width;a(this.$coverScreen).css({top:"0",left:"0px",height:c.height+"px",width:c.width+"px"});if(this.$loadDialog){var b={width:this.$loadDialog.outerWidth(),height:this.$loadDialog.outerHeight()};this.$loadDialog.css({top:(d.top+e.height/2-b.height/2)+"px",left:(d.left+e.width/2-b.width/2)+"px"});}}},refresh:function(b){this.content=null;this.show();},handleCloseKeyPress:function(b){if(b.keyCode===13){this.hide();}else{if(b.keyCode===9&&b.shiftKey){b.preventDefault();}}},hide:function(){if(this.display){var c=a.proxy(function(){if(this.childForms){for(var d=0;d<this.childForms.length;d++){this.childForms[0].reset();delete this.childForms[0];}}},this);a(this.display.container).fadeOut("normal",c);if(_.isFunction(this.onHide)){this.onHide();}var b=a.proxy(function(){if(this.$trigger.length){this.$trigger.get(0).focus();}a(".modal-dialog, .modal-loading, .modal-screen").remove();this.display=this.$coverScreen=this.content=null;if(_.isFunction(this.onClientAfterHide)){this.onClientAfterHide();}},this);a(this.$coverScreen).fadeOut("normal",b);window.theForm=this.previousAspForm||null;}}});})(jQuery);(function(a){a.widget("ui.uidialog",{container:{},options:{sourceElement:{},container:"",dialogClass:"",controller:"",controllerData:{sourceElement:{}},data:{},zIndex:0},onDialogOpen:function(){var c=this;c.options.controllerData.sourceElement=c.options.sourceElement;if((typeof this.options.controller!=="undefined")&&this.options.controller!==""){ep.require(this.options.controller,function(d){a(c.options.container).trigger(c.options.controller+"_dialogOpen",c.options.controllerData);});}var b=a(".ui-icon");if(b.length){b.addClass();}},onDialogClose:function(){ep.debug("uidialog: onDialogClose method");if((typeof this.options.controller!=="undefined")&&this.options.controller!==""){a(this.options.container).trigger(this.options.controller+"_dialogClose");}},_create:function(){var b=this;a(this.options.container).dialog({autoOpen:false,draggable:false,resizable:false,dialogClass:this.options.dialogClass,width:this.options.width,zIndex:this.options.zIndex});this.container=a(this.options.container);this.container.bind("dialogopen",function(c,d){b.onDialogOpen();});this.container.bind("dialogclose",function(c,d){b.onDialogClose();b.destroy();});},_init:function(){this.container.dialog("open");},destroy:function(){this.container.unbind("dialogopen");this.container.unbind("dialogclose");a.Widget.prototype.destroy.call(this);}});a(function(){a("[data-dialog]").live("click mouseenter",function(f){var d=this;var b=a(this).data("dialog");b.sourceElement=f.target;if(f.type==="click"){if(b.isModal){if(b.validateSession){if(ep.utilities.validateSession()){a(this).epmodal(b);}else{document.location.reload();}}else{a(this).epmodal(b);}}else{if(b.isPopup){b.popupTarget=a(this);a(this).eppopup(b);}else{if(b.isHover){return true;}else{a(this).uidialog(b);}}}}else{if(f.type==="mouseenter"){if(b.isHover){var c=setTimeout(function(){b.popupTarget=a(d);a(d).eppopup(b);},500);a(d).bind({mouseleave:function(){clearTimeout(c);}});}}}f.preventDefault();return false;});if(ep.clientData.showJsonModalOnLoad){ep.require("ep/widgets/epmodal.js",function(c){var b=jQuery.parseJSON(ep.clientData.showJsonModalOnLoad);a(document.forms[0]).epmodal(b);});}a("[data-dialog]").each(function(d){var c=this;var b=a(c).data("dialog");if(b.isAutoOpenPopup){setTimeout(function(){a(c).trigger("click");},1000);}});});})(jQuery);(function(a){a.widget("ui.epmodal",a.ui.uidialog,{loadDialogFx:null,loadDialog:null,triggerElement:null,options:{url:"",hideCloseButton:false},onDialogOpen:function(){var b=this;a.ui.uidialog.prototype.onDialogOpen.call(this);if(!this.options.hideCloseButton){this.container.parent().bind("keydown",function(d){var c=(d.keyCode?d.keyCode:d.which);if(a(d.target).hasClass("ui-dialog-titlebar-close")&&c===a.ui.keyCode.ENTER){b.container.dialog("close");return false;}if(d.keyCode!==a.ui.keyCode.TAB){return;}var g=a(":tabbable",this),e=g.filter(":first"),f=g.filter(":last");if(d.target===e[0]&&!d.shiftKey&&a(d.target).hasClass("ui-dialog-titlebar-close")){g[1].focus();return false;}if(d.target===f[0]&&!d.shiftKey&&e.hasClass("ui-dialog-titlebar-close")){e[0].focus();return false;}});}a(".ui-dialog-titlebar-close").attr("title",ep.messages.Close);},onDialogClose:function(){theForm=this.previousAspForm||null;a.ui.uidialog.prototype.onDialogClose.call(this);this.container.unbind("dialogopen");this.container.unbind("dialogclose");this.container.parent().unbind("keypress");this.container.empty();if(this.triggerElement){this.triggerElement.focus();}},_create:function(){this.triggerElement=this.element;if(!this.options.container.length){this.options.container="#modal";}if(this.options.zIndex<=0){this.options.zIndex=10003;}this.options.dialogClass+=" epmodal";if(a(this.options.container).length<1){a(document.body).append('<div data-auto="modal_content" id="'+this.options.container.replace("#","")+'"></div>');}this.displayLoadDialog();a.ui.uidialog.prototype._create.call(this);if(this.container&&this.container.dialog){this.container.dialog("option","modal",true);this.container.dialog("option","width","auto");this.container.dialog("option","height","auto");}},_init:function(){var b=this;b.options.data.nobk="T";a.ajax({url:b.options.dataUrl||ep.utilities.buildAjaxRequestPath(b.options.url),data:b.options.data,success:function(d){var c=d.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(c){d=c[1];}if(!b.previousAspForm&&window.theForm){b.previousAspForm=theForm;}a(b.options.container).html(d);if(ep.isPageRTL()){ep.utilities.bidiSanitizeContent(b.options.container);}b.childForms=a("#modal form");if(window.theForm&&b.childForms.length>0){theForm=b.childForms[0];}a(".ui-dialog-titlebar-close").hover(function(){a(b).removeClass("ui-state-hover");},function(){});a(b.loadDialog).stop(true,true).fadeOut();a("#loadingOverlay").remove();a.ui.uidialog.prototype._init.call(b);a(b.options.container).height("auto");a(b.options.container).css("min-height","");if(b.options.hideCloseButton){a(".ui-dialog-titlebar-close").hide();}else{a(".ui-dialog-titlebar-close").show();}if(a.isFunction(b.options.onload)){b.options.onload(b);}}});},destroy:function(){a.Widget.prototype.destroy.call(this);},loadDialogFocus:function(){try{this.loadDialog.focus();}catch(b){}},displayLoadDialog:function(c){if(!c){c=ep.messages.Loading;}this.loadDialog=a("#modalLoadDialog");if(!this.loadDialog.length){this.loadDialog=a("<div id='modalLoadDialog'>").attr("tabIndex",0);this.loadDialog.className="modal-loading";this.loadDialog.css({position:"absolute"});}this.loadDialog.html(c);a("body").append(this.loadDialog);a("body").append('<div id="loadingOverlay"></div>');this.loadDialog.css({top:"-1000px",left:"0px"});a(this.loadDialog).effect("pulsate",{times:150},"normal");var b=a(window);if(this.loadDialog){this.loadDialog.css({top:(b.scrollTop()+b.height()/2-this.loadDialog.height()/2)+"px",left:(b.scrollLeft()+b.width()/2-this.loadDialog.width()/2)+"px"});this.loadDialogFocus();}}});})(jQuery);(function(a){a.widget("ui.eppopup",a.ui.uidialog,{dialogTop:0,dialogLeft:0,arrowElement:{},options:{popupTarget:{},popupOffset:0,popupPosition:null,hideCloseButton:false,isShowVerticalPopups:false,message:null,closeAllOther:null,success:a.noop},_create:function(){ep.debug("eppopup : _create()");if(this.options.zIndex<=0){this.options.zIndex=10005;}if(this.options.closeAllOther){a("."+this.options.closeAllOther).not(this.element).dialog("close");}this.triggerElement=this.element;if(a(this.options.container).length<1){a(document.body).append('<div id="'+this.options.container.replace("#","")+'" data-auto="hover_db_desc"></div>');}a.ui.uidialog.prototype._create.call(this);},_init:function(){ep.debug("eppopup : _init()");if(this.options.isPopup&&this.container.dialog("isOpen")){this.container.dialog("close");}else{var b=this;if(this.options.url){a.ajax({url:ep.utilities.buildAjaxRequestPath(b.options.url),data:b.options.data,success:function(c){a(b.options.container).html(c);if(ep.isPageRTL()){ep.utilities.bidiSanitizeContent(b.options.container);}if(b.options.hideCloseButton){a(".ui-dialog-titlebar-close").hide();}if(b.options.isPopup){a(document.body).bind("click.popupClose",function(d){if(b.container.parent().has(d.target).length===0&&b.triggerElement.get(0)!==a(d.target).get(0)){b.container.dialog("close");}});}if(b.options.success){b.options.success();}if(b.isClosed){b.container.dialog("close");}else{a.ui.uidialog.prototype._init.call(b);b.displayDialog();if(b.container&&b.container.dialog){b.container.dialog("option","position",[b.dialogLeft,b.dialogTop]);}}},type:b.options.type||"get"});this.setHoverEvents();}else{if(this.options.message){a(this.options.container).html(this.options.message);}a.ui.uidialog.prototype._init.call(this);this.displayDialog();if(this.container&&this.container.dialog){this.container.dialog("option","position",[this.dialogLeft,this.dialogTop]);}if(this.options.hideCloseButton){a(".ui-dialog-titlebar-close").hide();}this.setHoverEvents();}}a(this.options.container).height("auto");a(this.options.container).css("min-height","");},destroy:function(){if(this.options.isHover){this.triggerElement.unbind("mouseleave");this.container.parent().unbind("mouseenter");this.container.parent().unbind("mouseleave");if(this.options.hideCloseButton){a(".ui-dialog-titlebar-close").show();}}if(this.options.isPopup){a(document.body).unbind("click.popupClose");}a(this.arrowElement).remove();while(this.options.popupTarget.next().hasClass("eppopup-arrow-elem")){this.options.popupTarget.next().remove();}a.ui.uidialog.prototype.destroy.call(this);},setHoverEvents:function(){var b=this;if(this.options.isHover){a(this.triggerElement).bind({mouseleave:function(){var c=setTimeout(function(){b.isClosed=true;b.container.dialog("close");},150);a(b.container).parent().bind({mouseenter:function(){clearTimeout(c);},mouseleave:function(){c=setTimeout(function(){b.isClosed=true;b.container.dialog("close");},150);}});a(b.arrowElement).bind({mouseenter:function(){clearTimeout(c);},mouseleave:function(){c=setTimeout(function(){b.isClosed=true;b.container.dialog("close");},150);}});}});}},setPopupDisplay:function(){if(this.container&&this.container.dialog&&this.container.parents(".ep-dialog-main").length<1){var c=this.container.siblings(".ui-dialog-titlebar");c.addClass("ep-dialog-top-left");c.wrapInner('<div class="ep-dialog-top" />');c.wrapInner('<div class="ep-dialog-top-rt" />');this.container.wrap('<div class="ep-dialog-content" />');this.container.parents(".ep-dialog-content").wrap('<div class="ep-dialog-main-inner" />');this.container.parents(".ep-dialog-main-inner").wrap('<div class="ep-dialog-main" />');var b=this.container.parents(".ep-dialog-main");a('<div class="ep-dialog-bot-left"><div class="ep-dialog-bot-rt"><div class="ep-dialog-bottom"></div></div></div>').insertAfter(b);}},displayDialog:function(){var k=a(this.options.container).parent(),n=this.options.popupTarget.width(),m=this.options.popupTarget.height(),o=this.options.popupTarget.offset(),p=a(window).height(),r=a(window).width(),q={top:a(window).scrollTop(),left:a(window).scrollLeft()},f=n/2-10,g=m/2-5,b=22+f,c=11+g,j=38,s=o.left+n/2,t=o.top+m/2,l=t-k.height()/2-q.top,i,e,d,h="onTop";this.options.popupTarget.after("<div />");this.arrowElement=this.options.popupTarget.next();if(this.options.isShowVerticalPopups){if((t-c-k.height())>q.top){h="onTop";}else{h="onBottom";}}else{if((s+b+k.width())<q.left+r){h="onRight";}else{if((s-b-k.width())>q.left){h="onLeft";}else{if((t-c-k.height())>q.top){h="onTop";}else{if((t+c+k.height())<(q.top+p)){h="onBottom";}}}}}if(this.options.popupPosition){h=thePosition;}if(h==="onRight"||h==="onLeft"){if(h==="onRight"){i=s+b+this.options.popupOffset-q.left;this.arrowElement.addClass("dialog-left-arrow");d=s+f+this.options.popupOffset-this.arrowElement.offsetParent().offset().left;}else{if(h==="onLeft"){i=s-k.width()-b-this.options.popupOffset-q.left;this.arrowElement.addClass("dialog-rt-arrow");d=s-(f+this.arrowElement.width())-this.options.popupOffset-this.arrowElement.offsetParent().offset().left;}}if(k.height()>p){l=q.top+(p/2)-(k.height()/2);}else{if((l+k.height())>(p+q.top)){l=p+q.top-k.height();}}if(l<0){l=0;}if((l+k.height())<(t+j)){l=t+j-(k.height()/2)-q.top;}else{if(l>(t-j)){l=t-j-q.top;}else{if(t<q.top){l=t-q.top-j;}}}e=(t-this.arrowElement.height()/2)-this.arrowElement.offsetParent().offset().top;}else{if(!this.options.isShowVerticalPopups){if(t<(p/2+q.top)){h="onBottom";}else{h="onTop";}}if(h==="onTop"){l=t-k.height()-c-q.top;this.arrowElement.addClass("dialog-top-arrow border-p1");e=t-g-this.arrowElement.height()-this.arrowElement.offsetParent().offset().top;}else{if(h==="onBottom"){l=t+c-q.top;this.arrowElement.addClass("dialog-bot-arrow");e=(t+g-(this.arrowElement.height()/2)-this.arrowElement.offsetParent().offset().top);}}i=s-k.width()/2-q.left;d=(s-this.arrowElement.width()/2)-this.arrowElement.offsetParent().offset().left;if(k.width()>r){i=(r/2+q.left)-k.width()/2;}else{if((i+k.width())>(q.left+r)){i=(q.left+r)-k.width();}if(i>s-j){i=s-j-q.left;}else{if((i+k.width())<(s+j)){i=s+j-k.width()-q.left;}}}}this.arrowElement.css("top",e+"px");this.arrowElement.css("left",d+"px");this.arrowElement.css("display","block");this.arrowElement.css("visibility","visible");this.arrowElement.addClass("eppopup-arrow-elem");this.dialogTop=l;this.dialogLeft=i;}});})(jQuery);(function(a){var b={left:37,up:38,right:39,down:40,tab:9,enter:13,escape:27};a.widget("ui.dropdown",{options:{},_create:function(){var c=a(document);_.bindAll(this,"handleActiveClicked","activeKeyHandler","select","itemKeyHandler","mainKeyHandler","handleOutsideClick");this.stayOpen=false;this.isOpen=false;this.activeElement=this.element.find(".dd-active");this.list=this.element.find(".dd-list");this.selectedListItem=this.list.find(".dd-list-item .dd-input:checked").parents(".dd-list-item");this.activeElement.click(this.handleActiveClicked);this.activeElement.on("keydown",this.activeKeyHandler);this.list.on("click",".dd-input",this.select);this.list.on("keydown",".dd-input",this.itemKeyHandler);this.element.keydown(this.mainKeyHandler);c.on("click.ui.dropdown",this.handleOutsideClick);},mainKeyHandler:function(c){if(c.which===b.escape){this.closeDropdown();this.activeElement.focus();}else{if(c.which===b.enter){return false;}}},handleActiveClicked:function(c){this.isOpen=!this.isOpen;if(a.browser.msie&&parseInt(a.browser.version,10)<8){if(this.isOpen){this.activeElement.closest(".field-row").css("z-index","2");}else{this.activeElement.closest(".field-row").css("z-index","auto");}}this.list.toggle();if(this.isOpen){this.stayOpen=true;this.focusSelectedListItem();this.element.attr("aria-expanded","true");}else{this.element.attr("aria-expanded","false");}c.preventDefault();},select:function(f){var d=a(f.target),c=d.siblings(".dd-label"),g=c.html(),e=a(window),h=e.scrollLeft(),i=e.scrollTop();this.activeElement.find(".txt").html(g);this.activeElement.attr("title",g);this.selectedListItem=d.closest(".dd-list-item");d.focus();if(!this.stayOpen){this.closeDropdown();this.activeElement.focus();}window.scrollTo(h,i);this.stayOpen=false;},itemKeyHandler:function(c){switch(c.which){case b.tab:this.closeDropdown();break;case b.enter:this.activeElement.focus();this.closeDropdown();return false;case b.up:this.stayOpen=true;if(!this.selectedListItem.prev().length){return false;}break;case b.down:this.stayOpen=true;if(!this.selectedListItem.next().length){return false;}break;}},handleOutsideClick:function(c){var d=c.target;if(this.isOpen&&!a.contains(this.element[0],d)){this.closeDropdown();}},activeKeyHandler:function(e){var c=this.selectedListItem,d=this.selectedListItem.parent().children(),f=d.first().get(0),i=d.last().get(0),l=this.selectedListItem.get(0),g,h,j;function k(m){if(m===b.down){if(c.get(0)===i){c=d.first();}else{c=c.next();}}else{if(c.get(0)===f){c=d.last();}else{c=c.prev();}}}if((e.which===b.down)||(e.which===b.up)){k(e.which);this.selectedListItem=c;this.focusSelectedListItem();return false;}else{h=String.fromCharCode(e.keyCode).toLowerCase();j=/^[a-zA-Z0-9\-]+$/;if(h.match(j)){do{k(b.down);g=(h===c.find(".dd-label").text().toLowerCase().substr(0,1));if(g){this.selectedListItem=c;this.focusSelectedListItem();}}while(!g&&(c.get(0)!==l));}}},closeDropdown:function(){if(a.browser.msie&&parseInt(a.browser.version,10)<8){this.activeElement.closest(".field-row").css("z-index","auto");}this.list.hide();this.element.attr("aria-expanded","false");this.isOpen=false;},openDropdown:function(){if(a.browser.msie&&parseInt(a.browser.version,10)<8){this.activeElement.closest(".field-row").css("z-index","2");}this.list.show();this.element.attr("aria-expanded","true");this.isOpen=true;},focusSelectedListItem:function(){var c=this.selectedListItem.find(".dd-input"),d=a(window),e=d.scrollLeft(),f=d.scrollTop();c.focus().click();window.scrollTo(e,f);}});a(function(){var c=a("[data-dropdown]");c.dropdown(c.data("dropDown"));});})(jQuery);if(!ep.dialog){ep.dialog={};}ep.dialog.PopupManager=function(a){return{createDialog:function(){var g=document.body.appendChild(a("<div>").get(0));g.className="ep-dialog border-p1";a(g).css({position:"absolute",display:"none"});var d=a("<div>").get(0);d.className="ep-dialog-top-left";g.appendChild(d);d=a("<div>").get(0);d.className="ep-dialog-top-rt";g.childNodes[0].appendChild(d);d=a("<div>").get(0);d.className="ep-dialog-top";var e=g.childNodes[0].childNodes[0].appendChild(d);d=a("<div>").get(0);d.className="ep-dialog-main";a(d).attr("data-auto","ep_dialog_main");g.appendChild(d);d=a("<div>").get(0);d.className="ep-dialog-main-inner";a(d).attr("data-auto","ep_dialog_main_inner_panel");g.childNodes[1].appendChild(d);d=a("<div>").get(0);d.className="ep-dialog-content";a(d).attr("data-auto","ep_dialog_content_panel");var f=g.childNodes[1].childNodes[0].appendChild(d);d=a("<div>").get(0);d.className="ep-dialog-bot-left";g.appendChild(d);d=a("<div>").get(0);d.className="ep-dialog-bot-rt";g.childNodes[2].appendChild(d);d=a("<div>").get(0);d.className="ep-dialog-bottom";g.childNodes[2].childNodes[0].appendChild(d);var c=document.body.appendChild(a("<div>").get(0));var b=null;return{outerElement:g,innerElement:f,arrowElement:c,headerElement:e,ie6Fixer:b};},displayDialog:function(y,u,w,s,v,x,t){function z(D){var G=0,F=0;var C=D;do{G+=C.offsetTop||0;F+=C.offsetLeft||0;if(a(C).offsetParent().get(0)===document.body&&a(C).css("position")==="absolute"){break;}C=C.offsetParent;}while(C);C=D;do{if(!a.browser.opera||(C.tagName&&(C.tagName.toUpperCase()==="BODY"))){G-=C.scrollTop||0;F-=C.scrollLeft||0;}C=C.parentNode;}while(C);var E=[F,G];E.left=F;E.top=G;return E;}a(document).trigger("ep.dialog.PopupManager:dialogWillDisplay");var n={width:a(y).outerWidth(),height:a(y).outerHeight()};var o=z(y);var p=a(window).height();var r=a(window).width();var q={left:a(window).scrollLeft(),top:a(window).scrollTop()};if(a.browser.msie&&parseInt(a.browser.version,10)<8){o=y.getBoundingClientRect();p=document.body.clientHeight;r=document.body.clientWidth;}var f=n.width/2-10;var g=n.height/2-5;var b=14+f;var c=16+g;var k=38;if(!v){v=0;}a(u.arrowElement).css({top:"-10000px",left:"0px",display:"block"});a(u.outerElement).css({top:"-10000px",left:"0px",display:"block",width:w+"px"});var A=o.left+n.width/2+q.left;var B=o.top+n.height/2+q.top;var m=B-u.outerElement.clientHeight/2;var j;var e;var d;var h="onTop";if((A+b+w)<q.left+r){h="onRight";}else{if((A-b-w)>q.left){h="onLeft";}else{if((B-c-u.outerElement.clientHeight)>q.top){h="onTop";}else{if((B+c+u.outerElement.clientHeight)<(q.top+p)){h="onBottom";}}}}if(x){h=x;}if(h==="onRight"||h==="onLeft"){if(h==="onRight"){j=A+b+v;u.arrowElement.className="dialog-left-arrow";d=A+f+v;}else{if(h==="onLeft"){j=A-w-b-v;u.arrowElement.className="dialog-rt-arrow";d=A-(f+u.arrowElement.clientWidth)-v;}}if(u.outerElement.clientHeight>p){m=q.top+(p/2)-(u.outerElement.clientHeight/2);}else{if(m<q.top){m=q.top;}else{if((m+u.outerElement.clientHeight)>(p+q.top)){m=p+q.top-u.outerElement.clientHeight;}}}if(m<0){m=0;}if((m+u.outerElement.clientHeight)<(B+k)){m=B+k-u.outerElement.clientHeight;}else{if(m>(B-k)){m=B-k;}}e=B-u.arrowElement.clientHeight/2;}else{if(B<(p/2+q.top)){h="onBottom";}else{h="onTop";}if(x!==null&&x!==undefined&&x.length>0){h=x;}if(h==="onTop"){m=B-u.outerElement.clientHeight-c;u.arrowElement.className="dialog-top-arrow border-p1";e=B-g-u.arrowElement.clientHeight;}else{if(h==="onBottom"){m=B+c;u.arrowElement.className="dialog-bot-arrow";e=(B+g);}}j=A-w/2;d=A-u.arrowElement.clientWidth/2;if(w>r){j=(r/2+q.left)-w/2;}else{if(j<q.left){j=q.left;}else{if((j+w)>(q.left+r)){j=(q.left+r)-w;}}if(j>A-k){j=A-k;}else{if((j+w)<(A+k)){j=A+k-w;}}}if(x!==null&&x!==undefined&&x.length>0){if(x==="onBottom"){m=o.top+n.height+q.top;j=o.left;if(t==="right"){j=(o.left+n.width)-w;}}}}if(s){a(u.outerElement).insertAfter(y);a(u.arrowElement).insertAfter(y);}var i=a(u.outerElement).offsetParent().get(0);if(i.tagName!=="BODY"&&i.tagName!=="HTML"){var l=a(i).offset();m=m-l.top;e=e-l.top;j=j-l.left;d=d-l.left;}a(u.arrowElement).css({top:e+"px",left:d+"px",display:"block"});a(u.outerElement).css({top:m+"px",left:j+"px",display:"block"});if(u.ie6Fixer!==null){u.outerElement.parentNode.insertBefore(u.ie6Fixer.frame1,u.outerElement);u.outerElement.parentNode.insertBefore(u.ie6Fixer.frame2,u.outerElement);a(u.ie6Fixer.frame1).css({top:m+7,left:j+22,width:u.outerElement.clientWidth-44,height:u.outerElement.clientHeight-14,display:"block"});a(u.ie6Fixer.frame2).css({top:m+22,left:j+8,width:u.outerElement.clientWidth-15,height:u.outerElement.clientHeight-44,display:"block"});}a(document).trigger("ep.dialog.PopupManager:dialogDisplayed");},hideDialog:function(b){if(!b){return;}if(b.outerElement){b.outerElement.style.display="none";b.arrowElement.style.display="none";}if(b.ie6Fixer){if(b.ie6Fixer.frame1.parentNode){b.ie6Fixer.frame1.parentNode.removeChild(b.ie6Fixer.frame1);}if(b.ie6Fixer.frame2.parentNode){b.ie6Fixer.frame2.parentNode.removeChild(b.ie6Fixer.frame2);}}}};}(jQuery);ep.dialog.HoverPopup=function(a){var i=[];var g=null;var l=null;var d=null;var c=null;var m=null;var e=false;var h=null;function j(n){if(l!==null){clearTimeout(l);l=null;}d=setTimeout(ep.dialog.HoverPopup.hideHover,(n||500));}function b(){if(d!==null){clearTimeout(d);d=null;}}function f(){g=ep.dialog.PopupManager.createDialog();a(g.outerElement).on("mouseover",b);a(g.outerElement).on("mouseout",j);a(g.arrowElement).on("mouseover",b);a(g.arrowElement).on("mouseout",j);e=true;}function k(o,p){if(!e){f();}var n=p||750;b();if(l!==null){clearTimeout(l);l=null;}m=o.target;if(m.name==="iconImage"){m=m.offsetParent;}l=setTimeout(ep.dialog.HoverPopup.showHover,n);return false;}return{addHover:function(q,p,t,u,o,s){var n,r;if(_.isElement(q)){r=a(q).attr("id");n="#"+r;}else{n="#"+q;r=q;}a(document).on("mouseover",n,function(v){k(v,o);});a(document).on("mouseout",n,j);i.push({id:r,data:p,width:u,render:t,offset:s,mouseoverFunc:h});},showHover:function(){l=null;var o;for(var q=0;q<i.length;q++){o=i[q];if(o.id===m.id){g.innerElement.innerHTML=o.render(o.data);break;}}var n=m;if(o.data&&o.data.positionElement){n=a(o.data.positionElement).get(0);}ep.dialog.PopupManager.displayDialog((n||m),g,o.width,false,o.offset);if(ep.clientData.restrictedElements&&ep.controller.GuestLoginController){var r=[];a.each(ep.clientData.restrictedElements,function(u,t){var s=a("#"+t,g.innerElement);if(s.length>0){r.push(s);}});ep.controller.GuestLoginController.applyRestrictions(r,function(){ep.dialog.HoverPopup.hideHover();});}var p=a(g.innerElement).find("[data-extmarkup]");if(p.length){ep.getInstance("ep.ExtendedMarkup",function(s){ep.ExtendedMarkup.processMathRecord(g.innerElement);});}},hideHover:function(n){ep.dialog.PopupManager.hideDialog(g);d=null;if(ep.dialog.FolderPopupObject){ep.dialog.FolderPopupObject.closeDialog();}},cancelHideHover:function(){b();},delayHide:function(n){j(n);},removeHover:function(q){if(!q){return;}var p=-1;for(var o=0;o<i.length;o++){if(i[o].id===q.id){p=o;break;}}if(p>=0){var n=i[o];if(n){a(n).off("mouseover",h);i.splice(o,1);}}}};}(jQuery);ep.dialog.ToggledPopup=function(a){var k=[];var i=null;var b=null;var f=false;var d=null;var g=null;var c=null;var j=null;function h(n){if(n.target!==b){f=true;}}function l(o){d=o;var n=k[o.id];if(n){if(!i){i=ep.dialog.PopupManager.createDialog();a(document).on("ep.dialog.PopupManager:dialogWillDisplay",a.proxy(function(){ep.dialog.PopupManager.hideDialog(i);}),null);b=a("<a tabIndex=0 data-auto='close_link'></a>");a(i.headerElement).append(b);b.on("click",function(p){ep.dialog.ToggledPopup.closeDialog(p);});b.on("keypress",function(p){if(p.keyCode===13){ep.dialog.ToggledPopup.closeDialog(p);p.preventDefault();}});a(i.outerElement).on("click",h);}a(o).addClass("ep-dialog-toggle");a(o).removeClass("color-s1").addClass("color-p1");b.html('<span class="hidden" data-auto="close_label">'+n.closeText+"</span>");if(c!==null&&j!==null){a(c).addClass("hidden");j.appendChild(c);c=j=null;}i.innerElement.innerHTML="";if(n.isAppendElement===true){c=n.data;j=n.data.parentNode;i.innerElement.appendChild(n.render(c));a(c).removeClass("hidden");}else{i.innerElement.innerHTML=n.render(n.data);}ep.dialog.PopupManager.displayDialog(d,i,n.width,!n.focusSelector,n.offset,n.position,n.alignment);a(document.body).on("click",ep.dialog.ToggledPopup.closeDialog);g=(_.isString(n.focusSelector))?a(i.innerElement).find(n.focusSelector).get(0):null;if(g){g.tabIndex=0;g.focus();}}}function e(){var n=a(".ep-dialog-toggle");if(n.length){n.each(function(o){a(o).removeClass("ep-dialog-toggle");if(a(o).hasClass("toggle")){a(o).removeClass("color-p1").addClass("color-s1");}});}}function m(o){var n=a(o.target).closest("a")[0];e();if(d===n){ep.dialog.ToggledPopup.closeDialog(o);}else{l(n);return false;}}return{addDialog:function(v,r,u,w,q,s,o,t,p){var n=(_.isString(v))?a("#"+v).get(0):v;if(n){if(k[n.id]){a(n).off("click",m);}a(n).on("click",m);n.tabIndex=0;k[n.id]={id:n.id,data:r,width:w,render:u||function(x){return x;},closeText:q,focusSelector:s,isAppendElement:o,position:t,alignment:p};}},closeDialog:function(n){if(f){f=false;}else{e();ep.dialog.PopupManager.hideDialog(i);a(document.body).off("click",ep.dialog.ToggledPopup.closeDialog);if(n){if(d===a(n.target).closest("a")[0]){n.preventDefault();}}d=null;}},showDialog:function(n){l(n);}};}(jQuery);function __doLinkPostBack(r,t,s){if(t&&t.length>0){var c=getPostBackForm();var g=(r.length<1)?getPostBackPage(c,true):r;var b=getUpdatedFormAction(c,g);var l=unescape(t);var k=l.split("||");var a="";for(var o=0;o<k.length;o++){var h=k[o].split("~~");if(h.length>0){var j=h[0];var f=null;if(j.indexOf("hidden_")===0){var u=j.split("_");j=u[1];if(document.all&&!document.getElementById){f=document.all[h[1]];}else{f=jQuery("#"+h[1])[0];}}var v="hidden";var p=j;var q=j;var w=null;if(f){w=f.value;}else{w=h[1];}var d=null;try{if(document.all&&!document.getElementById){d=document.all[j];}else{d=jQuery("#"+j)[0];}}catch(n){d=document.getElementById(j);}if((d===undefined)||(d==="")||(!d)){d=jQuery("<input/>").attr({type:v,id:p,name:q,value:w})[0];jQuery(c).append(d);}else{try{d.value=w;d.type=v;d.id=p;d.name=q;}catch(m){a+=p+"="+w+"&";}}d=null;}h=null;}c.action=b;c.method="post";if(a!==""){b+="&"+a;}if(((s!==undefined)&&(s!==""))||(s)){c.target=s;}c.__EVENTTARGET.value="";c.__EVENTARGUMENT.value="";c.submit();}}function AddAnchorToAction(a){document.forms[0].action+="#"+a;}function updateCheckboxGroupWithParent(f,g){var a=document.getElementById(g);if(a){var d=a.getElementsByTagName("input");for(var c=0;c<d.length;c++){var b=d[c];if(b.type==="checkbox"){b.checked=f;}}}}function checkAll(a){for(var c=0;c<theForm.elements.length;c++){var b=theForm.elements[c];if(b.type==="checkbox"&&b.name.indexOf(a)>-1){b.checked=true;}}}function uncheckAll(a){for(var c=0;c<theForm.elements.length;c++){var b=theForm.elements[c];if(b.type==="checkbox"&&(!a||b.name.indexOf(a)>-1)){b.checked=false;}}}function setCheckboxesByName(d,c){var a=document.getElementsByName(d);if(a){for(var b=0;b<a.length;b++){a[b].checked=c;}}}function ToggleVisibility(b){var a=getElementById(b);if(a){if(a.style.display!=="none"){a.style.display="none";}else{a.style.display="";}}}function ToggleDisplay(c){var a=getElementById(c);if(a){var b=a.style.display==="none"?"block":"none";a.style.display=b;}}function ToggleDisplayRow(c){var a=getElementById(c);if(a){var b=a.style.display==="none"?"display:table-row;":"display:none;";a.style.cssText=b;}}function openprintSearchHistory(b){var f=(screen.width-250);var c=(screen.height-250);var d=((screen.width-f)/2);var e=((screen.height-c)/2)-50;var a=window.open(b,"PrintHistory","toolbar=1,location=0,directories=0,status=0,menubar=1,scrollbars=yes,resizable=no,top="+e+",left="+d+",width="+f+",height="+c);a.focus();}function SelectChecked(e,d){var a=jQuery("#s_"+e);if(a.length){var b=jQuery("#e_"+e);if(!a.is(":checked")){if(b.length){b.attr("checked",false);}var c=jQuery("#f_"+e);if(c.length){c.attr("checked",false);}}else{if(d){if(b.length){b.attr("checked",true);}}}}}function ExplodeChecked(c){var a=jQuery("#e_"+c);if(a.length){if(a.is(":checked")){var b=jQuery("#s_"+c);if(b.length){b.attr("checked",true);}}}}function FocusChecked(c){var a=jQuery("#f_"+c);if(a.length){if(a.is(":checked")){var b=jQuery("#s_"+c);if(b.length){b.attr("checked",true);}}}}function ShowHideLimiters(d){var b=document.getElementsByTagName("tr");if(b){for(var c=0;c<b.length;c++){var a=b[c].attributes["class"];if(a){if(a.value==="display-toggled"||a.value==="hide"){b[c].style.display=d?"":"none";}else{if(a.value==="show"){b[c].style.display=!d?"":"none";}}}}}}function focusTextbox(b){if(typeof(searchID)!=="undefined"&&searchID){var a=document.getElementById(searchID);if(a){a.focus();}}else{for(var c=0;c<document.forms[0].length;c++){if(document.forms[0][c].type==="text"){document.forms[0][c].focus();return;}}}}function focusOnMainContent(){if(window.screen.width<1024&&document.location.toString().indexOf("#")<0){window.scroll(0,100);}}function focusOnAnchorResultList(){jQuery("#resultListAnchor").scrollTo();}function selectCheckboxParentElement(a,m,l,b,d,c,e){if(!c){c=b;}if(!e){e=d;}var k=a.parentNode;while(k){var g=false;if(m.length>0&&k.tagName.toLowerCase()===m.toLowerCase()){g=true;}else{if(l.length>0&&k.id.toLowerCase()===l.toLowerCase()){var h=elem.id.toLowerCase();var j=h.lastIndexOf(l.toLowerCase());g=j===h.length-l.length;}}if(g){var f=k.className;var i=f===c||f===e;if(a.checked){k.className=i?c:b;}else{k.className=i?e:d;}break;}else{k=k.parentNode;}}}function updateFolderSelectAll(a){if(a.checked){aSelectedFolderItemCount++;}else{aSelectedFolderItemCount--;}selectCheckboxParentElement(a,"li","","folder-list-item-selected","folder-list-item");var b=getElementByClientId("toggleAllCheckboxes",document.getElementById("folder-content"));if(b){b.checked=aSelectedFolderItemCount===aTotalFolderItemCount;if(b.checked===true){ep.folder.selectDeselectAll(b);}}ep.displayutilities.updateItemList(a);}function isOneOrMoreChecked(b,e,d){var a=document.getElementsByTagName("input");var f=false;for(var c=0;c<a.length&&!f;c++){if(a[c].type==="checkbox"&&a[c].name.indexOf(b)>-1&&a[c].checked){f=true;}}if(f){if(e){return confirm(e);}}else{if(d){alert(d);}}return f;}function isAtLeastOneChecked(h,g){var e=false;var b=h.split(",");var a;for(var d=0;d<b.length&&!e;d++){a=document.getElementsByName(b[d]);if(a){for(var f=0;f<a.length&&!e;f++){e=a[f].checked;}}}var c=document.getElementById(g);jQuery(".submit_emailprint").attr("disabled",!e);if(c){c.style.display=e?"none":"block";}return e;}function IsAnyCheckbox(c,d){var b=1;var a=true;if(d){a=false;}while(jQuery("#"+c+b).length){if(d){if(jQuery("#"+c+b).is(":checked")){a=true;break;}}else{if(!jQuery("#"+c+b).is(":checked")){a=false;break;}}b++;}return a;}function isAnyCheckBoxChecked(e){var d=false;var b=e.split(",");var a;for(var c=0;c<b.length&&!d;c++){a=document.getElementById(b[c]);if(a){d=a.checked;}}return d;}if(!ep.displayutilities){ep.displayutilities={};}ep.displayutilities.SelectedItems=[];ep.displayutilities.MaxBlockItems=25;ep.displayutilities.initSelected=function(a,c){var b=jQuery("#"+a);if(!b.length||b.val().length===0){return;}if(!isNaN(c)){ep.displayutilities.MaxBlockItems=c;}ep.displayutilities.SelectedItems=b.val().split(",");};ep.displayutilities.updateItemList=function(a){var c=ep.displayutilities.getItemValue(a);if(a.checked){if(ep.displayutilities.SelectedItems.indexOf(c)<0){ep.displayutilities.SelectedItems.push(c);}return;}var b=ep.displayutilities.SelectedItems.indexOf(c);if(b>=0){ep.displayutilities.SelectedItems.splice(b,1);}};ep.displayutilities.getItemValue=function(a){var b="folderCheckValue"+a.name.substring(a.name.indexOf("_"));return jQuery("input[name='"+b+"']").first().val();};function onenterkeypress(b){var a=getElementById(b);if(a&&a.click){a.click();return false;}else{if(debug_mode){alert("The wrong button ID '"+b+"' was assigned to submit the form!");return false;}else{return false;}}}function is_key(a,c){var b=a.which?a.which:a.keyCode;if(b===c){if(document.all){a.returnValue=false;}return true;}else{return false;}}function is_enter_key(c){var a=13;var b=10;return is_key(c,a)||is_key(c,b);}function is_down_arrow_key(b){var a=40;return is_key(b,a);}function is_up_arrow_key(b){var a=38;return is_key(b,a);}function onkeypress_event(a,b){if(is_enter_key(a)){var c=a.srcElement;if(!c){c=a.target;}if(c&&c.getAttribute("autocomplete")==="on"){return true;}else{return onenterkeypress(b);}}return true;}(function(a){a(function(){var h={left:37,up:38,right:39,down:40,tab:9,enter:13};var o=function(r,s){s.addClass("active");if(g(r)){s.addClass("active-left");}};var g=function(r){if(r.length>0){return(r.offset().left<0);}};var p=function(r){r.removeClass("active-left").removeClass("active");};var f=a(".subnav-item"),c=a(".nav-item"),d=a(".submenu-trigger"),b=d.find(".subnav-item > .submenu");var l=function(t){var s=a(this),r=t?s.parent().closest(".submenu-trigger")[t]():s.parent().closest(".submenu-trigger");if(r.length){r.focus();}};var i=function(y,r,x){var t=a(this),u=r.index(t),v=r.length-1,w=u+x;if(w<0){r.last().focus();}else{if(w>v){r.first().focus();}else{var s=r.eq(w);s.focus();}}};var m=function(s,r){i.call(this,s,r,-1);};var j=function(s,r){i.call(this,s,r,1);};var k=function(){var s=a(this),r=s.children(".submenu").children(".subnav-item").not("[data-selected]").first();r.focus();};c.keypress(function(r){if(r.which===h.enter){r.stopPropagation();r.preventDefault();}}).keydown(function(u){var s=a(this),t=s.index();switch(u.which){case h.tab:if(u.shiftKey){if(t!==0){u.preventDefault();m.call(this,u,s.parent().children());}}else{if(t!==s.parent().children().length-1){u.preventDefault();j.call(this,u,s.parent().children());}}break;case h.up:u.preventDefault();break;case h.down:u.preventDefault();break;case h.enter:u.stopPropagation();u.preventDefault();if(!s.hasClass("submenu-trigger")){var r=s.find(".link").first();if(r.attr("data-dialog")){r.click();}else{if(r.attr("target")==="_blank"){window.open(r.attr("href"));}else{window.location=r.attr("href");}}}break;}}).keyup(function(s){var r=a(this);switch(s.which){case h.enter:o(r.find(".submenu").first(),r);k.call(this);break;case h.down:o(r.find(".submenu").first(),r);k.call(this);break;case h.right:p(r);j.call(this,s,r.parent().children());break;case h.left:p(r);m.call(this,s,r.parent().children());break;}}).focus(function(){a(this).addClass("highlight");}).blur(function(){a(this).removeClass("highlight");});var n=function(u){var t=a(this),r=t.closest(".nav-item");p(r);var s=r[u]();if(!s.length){if(u==="prev"){s=r.parent().children().last();}else{if(u==="next"){s=r.parent().children().first();}}}if(s.hasClass("submenu-trigger")){o(s.find(".submenu").first(),s);k.call(s[0]);}else{s.focus();}};f.keydown(function(r){if(r.which===h.enter){r.stopPropagation();r.preventDefault();}else{if(r.which===h.tab){p(a(this).parents(".submenu-trigger"));}}}).keyup(function(t){var s=a(this);t.preventDefault();t.stopPropagation();switch(t.which){case h.left:var r=s.parent().closest(".submenu-trigger");p(s.parent().closest(".submenu-trigger"));if(r.hasClass("nav-item")){n.call(this,"prev");}else{l.call(this);}break;case h.right:if(!s.hasClass("submenu-trigger")){p(s.parents(".submenu-trigger"));n.call(this,"next");}break;case h.up:m.call(this,t,s.closest(".submenu").children().not("[data-selected]"));break;case h.down:j.call(this,t,s.closest(".submenu").children().not("[data-selected]"));break;case h.enter:if(!s.hasClass("submenu-trigger")){window.location=s.find(".submenu-link").first().attr("href");}break;}}).focus(function(){a(this).addClass("highlight");}).blur(function(){a(this).removeClass("highlight");});f.filter(".submenu-trigger").keyup(function(t){var s=a(this);if(t.which===h.right||t.which===h.enter){var r=s.find(".submenu").first();o(r,s);r.children().first().focus();}});var q=navigator.userAgent;if(q.indexOf("Android")!==-1||q.indexOf("Phone")!==-1||q.indexOf("iPad")!==-1){d.on("touchend",function(s){var r=a(this);d.each(function(u,t){if(!r.is(t)&&r.find(t).length===0){p(a(t));}});if(r.hasClass("active")&&r.find(".submenu").find(s.target).length===0){p(r);return true;}o(r.children(".submenu"),r);});d.click(function(){e.preventDefault();});b.on("touchend",function(u){var t=a(this),s=t,r=s.children(".submenu");o(r,s);});a(document).on("touchend",function(r){if(d.find(r.target).length===0&&!d.is(r.target)){p(a(".submenu-trigger"));}});}else{d.on("hover",function(s){var r=a(this);if(s.type==="mouseleave"&&r.hasClass("active")){p(r);return;}o(r.children(".submenu"),r);});b.on("hover",function(u){var t=a(this),s=t,r=s.children(".submenu");if(u.type==="mouseleave"&&t.hasClass("active")){p(t);return;}o(r,s);});a(document).on("click",function(r){p(a(".submenu-trigger"));});}});})(jQuery);function openTip(b){var a=window.open(b,"searchtip","status=no,width=550,height=450,resizable=yes,scrollbars=yes");a.focus();}function openWideTip(c,b){if(b){c+="#"+b;}var a=window.open(c,"searchtip","status=no,width=800,height=600,resizable=yes,scrollbars=yes");a.focus();}function openListItem(b){var a=window.open(b,"LinkListItem","top=10,left=200,width=750,height=450,status=1,menubar=1,scrollbars=1,titlebar=0,resizable=1,location=0,toolbar=1");a.focus();}function newWin(c,d,b){if(b.length===0){b="";}if(d.length===0){d="";}var a=window.open(c,d,b);a.focus();if(document.all&&window.event){window.event.returnValue=true;}return(true);}function imageQuickView(b){var a=window.open(b,"ImageQuickView","status=0,menubar=1,scrollbars=1,titlebar=0,resizable=1,location=0,toolbar=0");a.focus();if(document.all&&window.event){window.event.returnValue=false;}return(false);}function createNotePopup(d){var b=/msie 6/.test(navigator.userAgent.toLowerCase());var c=/msie 7/.test(navigator.userAgent.toLowerCase());var e="width=415";if(b||c){e="width=435";}var a=window.open(d,"CreateNote","status=0,menubar=0,scrollbars=1,titlebar=0,resizable=1,location=0,toolbar=0,height=505,"+e);a.focus();}function OpenDictionary(b){var a=window.open(b,"Dictionary","top=40,left=200,width=590,height=400,status=1,menubar=0,scrollbars=1,titlebar=0,resizable=1,location=0,toolbar=0");a.focus();if(document.all&&window.event){window.event.returnValue=false;}}function SubmitSearchToParent(b){var a=window.opener;a.__doLinkPostBack("","target~~popup||args~~"+b,"");window.close();}function OpenInset(b){var a=window.open("","Inset","top=50,left=50,width=850,height=500,status=0,menubar=0,scrollbars=1,titlebar=0,resizable=1,location=0,toolbar=0");a.location=b;a.focus();if(document.all&&window.event){window.event.returnValue=false;}return(false);}function PopUpHealthology(b){var f=732;var c=604;var d=(screen.width-f)/2;var e=(screen.height-c)/2;var a=window.open(b,"healthology","top="+e+",left="+d+",width="+f+",height="+c+",status=0,menubar=0,scrollbars=0,titlebar=0,resizable=0,location=0,toolbar=0,channelmode=0,directories=0,fullscreen=0");a.focus();if(document.all&&window.event){window.event.returnValue=false;}}function PopUpAnimation(c,b,d){var e=b||"240";var h=d||"320";var f=(screen.width-h)/2;var g=(screen.height-e)/2;var a=window.open("","animation","top="+g+",left="+f+",width="+h+",height="+e+",status=0,menubar=0,scrollbars=0,titlebar=0,resizable=0,location=0,toolbar=0,channelmode=0,directories=0,fullscreen=0");a.document.open();a.document.write("<html>\n<head>\n");a.document.write('<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">\n');a.document.write("<title>Flash Animation</title>\n</head>\n");a.document.write('<body bgcolor="#000000" onload="preload();">\n');a.document.write('<div id="message" style="display:block;position:absolute;left:0;top:'+e/2+";width:"+h+";height:"+e/2+';font-family:Verdana,Arial,Sans-Serif;font-size:14pt;font-weight:bold;text-align:center;background-color:#000000;color:#ffffff;">Loading... Please wait!</div>\n');a.document.write('<div id="wrapper" style="display:none;position:absolute;left:0;top:0;width:'+h+";height:"+e+';background-color:#000000;">\n');if(navigator.appName.toLowerCase().indexOf("explorer")!==-1){a.document.write('<object id="animation" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" width="'+h+'" height="'+e+'">\n');a.document.write('<param name="Movie" value="'+c+'"/>\n');}else{a.document.write('<object id="animation" type="application/x-shockwave-flash" data="'+c+'" width="'+h+'" height="'+e+'">\n');}a.document.write('<param name="BgGolor" value="#000000"/>\n');a.document.write('<param name="AutoPlay" value="true"/>\n');a.document.write('<param name="Loop" value="false"/>\n');a.document.write('<param name="Quality" value="High"/>\n');a.document.write('<param name="Menu" value="false"/>\n');a.document.write('<param name="WMode" value="Opaque"/>\n');a.document.write('<param name="Scale" value="ShowAll"/>\n');a.document.write('<div id="download" style="display:block;position:absolute;left:0;top:'+e/2+";width:"+h+";height:"+e/2+';text-align:center;color:#ffffff;">\n');a.document.write('<a href="http://www.adobe.com/go/getflashplayer" title="Download Flash Player!" target="_blank"><img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" border="0"/></a></div>\n');a.document.write("</object>\n");a.document.write("</div>\n");a.document.write('<script language="javascript" type="text/javascript">function preload(){\n');a.document.write('document.getElementById("wrapper").style.display="block";\n');a.document.write('document.getElementById("message").style.display="none";\n');a.document.write("}</script>\n");a.document.write("</body>\n</html>");a.document.close();a.focus();if(document.all&&window.event){window.event.returnValue=false;}}function PopUpFlashVideo(b){var a=ep.utilities.getBaseRequestPath();if(a!==null){window.open(a+b,"flvplayer","width=420,height=360");}}function getControls(a){return[document.forms[0][document.forms[0]["text_"+a].value],document.forms[0][document.forms[0]["hidden_"+a].value],document.getElementById(document.forms[0]["label_"+a].value.replace(/\$/g,"_")),document.forms[0][document.forms[0]["button_"+a].value]];}function openPreSelWindow(e,c,d){var a=getControls(d);var b=a[0].value;if(c){newWin("popup-index?sid="+e+"&hid="+c+"&vid=&id="+d+"&term="+b,"indexlist","top=90,left=300,width=450,height=545,toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=no");}else{newWin("popup-index?sid="+e+"&vid=&id="+d+"&term="+b,"indexlist","top=90,left=300,width=450,height=545,toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=no");}}function setPreSelTerm(c,b){window.focus();var a=getControls(b);a[0].value="";a[0].style.display="none";a[1].value=c;a[2].style.display="none";a[2].innerHTML=c;a[2].style.display="";a[3].style.display="";}function resetPreSelTerm(b){var a=getControls(b);a[1].value="";a[2].style.display="none";a[3].style.display="none";a[0].style.display="";}function openOLRTestWindow(e,f,c,b,a,d){if(c){newWin("olrtests?sid="+e+"&vid="+f+"&hid="+c+"&db="+b+"&an="+a+"&md="+d,"Tests","top=50,left=50,width=850,height=500,status=0,menubar=0,scrollbars=1,titlebar=0,resizable=1,location=0,toolbar=0");}else{newWin("olrtests?sid="+e+"&vid="+f+"&db="+b+"&an="+a+"&md="+d,"Tests","top=50,left=50,width=850,height=500,status=0,menubar=0,scrollbars=1,titlebar=0,resizable=1,location=0,toolbar=0");}}function OpenPDF(b){var a=window.open(b,"_pdf","top=40,left=100,width=750,height=800,toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes");a.focus();return false;}function showMessageBox(h){var c=getElementById("messageBox");if(c){var g=getElementByClientId("lblMessage",c);if(g&&h){g.innerHTML=h;}c.style.width=document.body.offsetWidth.toString()+"px";c.style.height=document.body.offsetHeight.toString()+"px";var e=document.getElementById("messageContents");var f=document.getElementById("coverScreen");var b=(document.body.offsetHeight/2-e.offsetHeight/2)+"px";var a=(document.body.offsetWidth/2-e.offsetWidth/2)+"px";f.style.left=a;e.style.left=a;f.style.top=b;e.style.top=b;c.style.visibility="visible";f.style.height=e.offsetHeight.toString()+"px";f.style.width=e.offsetWidth.toString()+"px";f.style.visibility="visible";var d=getElementByClientId("btnSubmit",c);window.scrollTo(b,a);if(d){d.focus();}}}function DisplayDynamicWindow(j,m,i,f,h,b,k){var d=getElementById(j);var e;var l,n;if(k){jQuery(document.body).append(d);}if(f){e=getElementById(f);}else{e=getElementById("coverScreen");}if(m==="hidden"){d.style.display="none";ep.ie6SelectFix(true);}else{if(m==="visible"){d.style.display="block";ep.ie6SelectFix();if(b){var a=jQuery(b).offset();n=a.top-d.offsetHeight/2;l=a.left+b.offsetWidth;}else{n=200;l=Math.round((document.body.offsetWidth*0.5)-(d.offsetWidth*0.5));}d.style.left=l+"px";d.style.top=n+"px";e.style.top=n+"px";e.style.left=l+"px";e.style.height=d.offsetHeight.toString()+"px";e.style.width=d.offsetWidth.toString()+"px";}}d.style.visibility=m;e.style.visibility=m;var g;if(h){g=getElementById(h);if(g){g.innerHTML='<table id="messageBox2" class="popupContainer"><tr><td></td></tr></table>';var c=getElementById("messageBox2");c.style.width=document.body.offsetWidth.toString()+"px";c.style.height=document.body.offsetHeight.toString()+"px";c.style.visibility=m;}}stopCurrentEvent(i);}function showImageBox(j,k){var c=getElementById("imageBox");if(c){ep.ie6SelectFix();var i=getElementByClientId("lblTitle",c);if(i&&j){i.innerHTML=j;}var d=getElementByClientId("DisplayedLargeImage",c);if(d&&k){d.src=k;}c.style.width=document.body.offsetWidth.toString()+"px";c.style.height=document.body.offsetHeight.toString()+"px";var f=document.getElementById("messageContents");var h=document.getElementById("coverScreen");var b=(document.body.offsetHeight/2-f.offsetHeight/2)+"px";var a=(document.body.offsetWidth/2-f.offsetWidth/2)+"px";var g;if(self.pageYOffset){g=self.pageYOffset;}else{if(document.documentElement&&document.documentElement.scrollTop){g=document.documentElement.scrollTop;}else{if(document.body){g=document.body.scrollTop;}}}g=g+10;h.style.left="60px";f.style.left="60px";h.style.top=g+"px";f.style.top=g+"px";c.style.visibility="visible";h.style.height=f.offsetHeight.toString()+"px";h.style.width=f.offsetWidth.toString()+"px";h.style.visibility="visible";var e=getElementByClientId("btnSubmit",c);if(e){e.focus();}}}function closeImageBox(){var a=getElementById("imageBox");if(a){a.style.visibility="hidden";}ep.ie6SelectFix(true);var b=document.getElementById("coverScreen");if(b){b.style.visibility="hidden";}}function findDynamicPopupSize(c){c.style.left="-100%";c.style.display="block";var b=c.clientWidth;var a=c.clientHeight;c.style.display="none";return[b,a];}function findPos(a){return jQuery(a).offset();}var VerticalPosition={AlignTop:0,AlignBottom:1,AlignCenter:2};var HorizontalPosition={Left:0,Right:1};function PopupPosition(){this.hAlign=HorizontalPosition.Left;this.vAlign=VerticalPosition.AlignCenter;this.hPadding=15;this.vPadding=0;}function PopupController(){this.position=new PopupPosition();this.coverScreen=true;}PopupController.prototype={clearContent:function(b){var a=document.getElementById(b+"_t");if(a){a.innerHTML="";}},showPopup:function(theControlClientID,theReferenceElementID){ep.debug("popupwin : showPopup()");var aContainer=document.getElementById(eval(theControlClientID+"_p"));var aTarget=document.getElementById(eval(theControlClientID+"_t"));if(!aContainer||!aTarget){return;}this.clearContent(theControlClientID);aTarget.innerHTML=this.getContent();this.positionPopup(aContainer,theReferenceElementID);if(this.coverScreen&&navigator.userAgent.toLowerCase().indexOf("msie 6")>-1){var aIFrame=document.getElementById(theControlClientID+"_iframe");if(!aIFrame){aIFrame=document.createElement("iframe");aIFrame.id=theControlClientID+"_iframe";}aIFrame.style.position="absolute";aIFrame.style.top=aContainer.style.top;aIFrame.style.left=aContainer.style.left;aIFrame.style.width=aContainer.clientWidth+"px";aIFrame.style.height=aContainer.clientHeight+"px";aContainer.style.zIndex="1";aContainer.parentNode.appendChild(aIFrame);}aContainer.style.display="block";jQuery(document).trigger("popuplinkclicked",[theReferenceElementID,theControlClientID]);},getContent:function(){},positionPopup:function(d,e){var a=document.getElementById(e);var c=findPos(a);var b=findDynamicPopupSize(d);switch(this.position.hAlign){case HorizontalPosition.Left:d.style.left=(c.left-b[0]-this.position.hPadding).toString()+"px";break;case HorizontalPosition.Right:d.style.left=(c.left+a.scrollWidth+this.position.hPadding).toString()+"px";break;}switch(this.position.vAlign){case VerticalPosition.AlignTop:d.style.top=c.top.toString()+"px";break;case VerticalPosition.AlignBottom:d.style.top=(c.top-b[1]+a.scrollHeight).toString()+"px";break;case VerticalPosition.AlignCenter:d.style.top=(c.top+a.scrollHeight/2-b[1]/2).toString()+"px";break;}}};function closeDynamicPopup(theClientID){var aContainer=document.getElementById(eval(theClientID+"_p"));if(aContainer){aContainer.style.display="none";}var aIFrame=document.getElementById(theClientID+"_iframe");if(aIFrame){aIFrame.parentNode.removeChild(aIFrame);}}function showShDetails(b,c){var a=new PopupController();a.getContent=function(){return document.getElementById("lastRun_"+c).innerHTML;};if(ep.isPageRTL()){a.position.hAlign=HorizontalPosition.Right;}a.showPopup(b,"lnkDetails_"+c);}function OpenPopup(i,j,b,h){var f=window.open("",j,(h?h:"height=540px,width=555px,resizable=no,scrollbars=no,toolbar=no,location=no,directories=no,directories=no,menubar=no,copyhistory=no"));if(f){var g=null;try{var c=new RegExp("^(?:\\w+://[\\w\\./]+(?:\\:\\d+)?/)?([\\w\\.]+)(?:\\?.+)?$");var d=i.replace(c,"$1");if(f&&f.location&&(f.location.toString()!==""||f.location.toString()==="about:blank")){g=f.location.toString().replace(c,"$1");}if(b||f.location.toString()==="about:blank"||!g||g!==d){f.location=i;}if(navigator.appVersion.indexOf("Mac")!==-1){f.location.href=i;}}catch(a){}f.focus();}}function removeBlockerIFrame(c){ep.ie6SelectFix(true);var b=c.id+"_iframe";var a=document.getElementById(b);if(a){a.parentNode.removeChild(a);}}function addBlockerIframe(e){ep.ie6SelectFix();var c=e.id+"_iframe";var b=jQuery("#"+c)[0];if(!b){b=document.createElement("iframe");b.id=c;b.title="BlockerFrame";}var a=findPos(e);b.style.position="absolute";b.style.left=a.left.toString()+"px";b.style.top=a.top.toString()+"px";b.style.width=e.clientWidth+"px";b.style.height=e.clientHeight+"px";try{document.body.removeChild(e);e.style.zIndex="1";document.body.appendChild(b);b.appendChild(e);}catch(d){}}function toggleFolderDropdown(g,h){var b=document.getElementById(h);var a=document.getElementById(g);var c=a.parentNode;var e=jQuery(c).position();var d=e.left;var f=e.top+c.offsetHeight;b.style.left=d.toString()+"px";b.style.top=f.toString()+"px";if(b.style.display==="none"){b.style.display="block";if(b.offsetHeight>b.style.maxHeight){b.style.overflow="scroll";}}else{b.style.display="none";}}function folderCreateParentSelect(d,e){var b=document.getElementById("folderParentValue");b.value=d;var c=document.getElementById("folderParentShowLink");c.innerHTML=unescape(e);var a=document.getElementById("folderParentSelect");a.style.display="none";if(navigator.appVersion.match(/MSIE 6.0/)){removeBlockerIFrame(a);}}function showQuickViewHint(c,d){var b=jQuery(c).position();var a=document.getElementById(d);if(a){jQuery(a).show();a.style.left=(b[0]-a.offsetWidth+c.offsetWidth)+"px";a.style.top=(b[1]-a.offsetHeight-5)+"px";}return false;}function closeQuickViewHint(b){var a=document.getElementById(b);if(a){jQuery(a).hide();}return false;}function showSmartTextViewHint(c,d){var b=jQuery(c).position();var a=document.getElementById(d);if(a){a.style.left=(b.left+c.offsetWidth+5)+"px";a.style.top=(b.top-c.offsetHeight)+"px";jQuery(a).show();}return false;}function closeSmartTextViewHint(b){var a=document.getElementById(b);if(a){jQuery(a).hide();}return false;}ep.updateVisualSearchLimiters=function(b){var a=b.target;ep.syncCheckboxState(a,document.forms[0]);jQuery.ajax({type:"post",url:a.action,data:{isAsyncModalPost:"true"},success:search});this.dialog.hide();b.preventDefault();};ep.syncModalCheckboxes=function(){if(this.href.match(/&resetForm=true/)){this.href=this.href.replace(/&resetForm=true/,"");this.content=null;}else{if(this.childForms&&this.childForms.length>0){ep.syncCheckboxState(document.forms[0],this.childForms[0]);}}};ep.addModalRedirectParameter=function(){if(this){var b=document.forms[0];var a=document.createElement("input");a.type="hidden";a.name="redirectUrl";a.value=b.action;this.appendChild(a);}};ep.clearModalContent=function(){if(this){this.content=null;}};ep.ResetModalDialog=function(a,b){a.href=a.href+"&"+b;a.refresh();return false;};ep.syncCheckboxState=function(d,e){if(!d||!e){return;}var a=d.getElementsByTagName("input");for(var c=0;c<a.length;c++){if(a[c].type.toLowerCase()==="checkbox"){var b=e[a[c].name];if(b&&b.type.toLowerCase()==="checkbox"){b.checked=a[c].checked;}}}jQuery(e).trigger("ep_syncCheckboxState_complete");};var EPDropDownBlocker=function(){_blockerFrame=null;return{AddBlocker:function(a){if(navigator.appVersion.match(/MSIE 6/)){if(!_blockerFrame){_blockerFrame=document.createElement("iframe");_blockerFrame.style.position="absolute";}if(a.parentNode){a.parentNode.insertBefore(_blockerFrame,a);_blockerFrame.style.width=a.clientWidth;_blockerFrame.style.height=a.clientHeight;_blockerFrame.style.left=a.offsetLeft+"px";_blockerFrame.style.top=a.offsetTop+"px";if(a.style.zIndex<2){a.style.zIndex=2;}_blockerFrame.style.zIndex=a.style.zIndex-1;}}},RemoveBlocker:function(){if(_blockerFrame&&_blockerFrame.parentNode){_blockerFrame.parentNode.removeChild(_blockerFrame);}}};}();var _imageTimeout;function logDataTransaction(d,c){var a=jQuery("#"+d).closest("form")[0].action.toString();a=a.replace(/(\/*)[\w\d]*?(\?)/,"$1logasync$2");var b="Mode=HoverView&ShortDB="+c.DB+"&AN="+c.UITerm+"&MID="+c.MID+"&IssnIsbn="+c.IssnIsbn+"&PubType="+c.PubType+"&SrcTitle="+c.JnBookTitle+"&Format=Image";jQuery.ajax({type:"post",url:a,data:b});}function showBiggerImage(p,q,o){var g=document.getElementById("relatedImagePopup");if(!g){g=document.createElement("span");}var c=g.getElementsByTagName("img")[0];if(!c){c=document.createElement("img");g.appendChild(c);}c.src=q;if(!c.complete&&!c.width&&!c.naturalWidth){_imageTimeout=setTimeout('showBiggerImage("'+p+'","'+q+'","'+o+'")',250);return;}var b=jQuery("#"+p).data("previewimagejson");if(b){var m=ep.utilities.buildAjaxRequestPath("Detail/ImageHover",{Db:b.Database,Tag:b.UITag,Term:b.UITerm});jQuery.ajax({url:m,cache:false});}g.id="relatedInfoPopup";g.style.position="absolute";g.style.left="-5000px";g.className="related-info-shadow";c.className="related-info-image";document.getElementsByTagName("body")[0].appendChild(g);var n=c.width;var a=800;var f=10;var e=10;var d=a;var l=-1;var j=-1;var k=-1;var i=document.getElementById("resultListInnerDiv");if(i){l=i.offsetWidth;d=l-f;j=i.offsetLeft;k=j+l-1;}if(d<e||d>a){d=a;}if(n>d){c.style.maxWidth=""+d+"px";c.width=d;n=d;}g.style.top=(jQuery(window).scrollTop()+80).toString()+"px";var h=(document.body.clientWidth/2)-(n/2);if((j>0)&&(h+n>k)){h=k-n;if(h<0){h=0;}}if(ep.isPageRTL()){g.style.right=h.toString()+"px";}else{g.style.left=h.toString()+"px";}EPDropDownBlocker.AddBlocker(g);}function hideBiggerImage(){clearTimeout(_imageTimeout);var a=jQuery("#relatedInfoPopup");if(a.length){a.remove();}EPDropDownBlocker.RemoveBlocker();}function addThisClick(d){var b=document.getElementById(d);if(b&&ep.clientData.addThis){var c=ep.clientData.addThis.bookmarkUrl+"&url="+encodeURIComponent(b.value)+"&title="+encodeURIComponent(document.title);var a=window.open(c,"_blank","scrollbars=yes,menubar=no,width=620,height=520,resizable=yes,toolbar=no,location=no,status=no,screenX=200,screenY=100,left=200,top=100");a.focus();}}(function(a){if(!ep.utilities){ep.utilities={version:1};}ep.utilities.isNumeric=function(b){return(b-0)===b&&b.length>0;};ep.utilities.numOrDefault=function(c,b){return ep.utilities.isNumeric(c)?c:(b||0);};ep.utilities.getAction=function(){return document.forms[0].action;};ep.utilities.replaceEPCommand=function(g){var e="";var c=ep.utilities.getBaseRequestPath();if(c&&g!==null&&g.length!==0){var b=document.getElementById("aspnetForm");var f=b?b.action:window.location.href;var d=f.indexOf("?");e=c+g+(d>-1?f.substr(d):"");}return e;};ep.utilities.getCommand=function(){var d;var c;var f;var b;var e;d=ep.utilities.getAction();c=d.indexOf("?");f=d.substring(0,c);b=f.lastIndexOf("/");e=f.substring(b+1);return e;};ep.utilities.selectSingleNode=function(f,d){if(f===null||f.length===0){return null;}if(d===null||d.length===0){return null;}try{if(!("XPathEvaluator" in window)){return f.selectSingleNode(d);}else{try{return ep.utilities.getSingleNode(f,d);}catch(c){return f.selectSingNode(d);}}}catch(b){return ep.utilities.getSingleNode(f,d);}};ep.utilities.getSingleNode=function(e,b){var f=new XPathEvaluator();var c=f.createNSResolver(e.ownerDocument===null?e.documentElement:e.ownerDocument.documentElement);var d=f.evaluate(b,e,c,XPathResult.FIRST_ORDERED_NODE_TYPE,null);return d.singleNodeValue;};ep.utilities.getXmlElementValue=function(b){if(b.textContent!==undefined){return b.textContent;}if(b.text!==undefined){return b.text;}return null;};ep.utilities.getBaseRequestPath=function(){var b;return function(){if(!b){var e=document.getElementById("RelRequestPath");if(e||ep.relativeRequestPath){var f=window.location.href;var d=new RegExp("(^.*)"+(ep.relativeRequestPath||e.value)+"\\?");var c=d.exec(f);if(c!==null&&c.length>1){b=c[1];}if(!b){var g=/^\w+:\/\/[^\/]+\/[^\/]+\//.exec(window.location.href);if(g&&g.length>1){b=g[0];}}if(b&&!/\/$/.test(b)){b=b+"/";}}}return b;};}();ep.utilities.buildRouteKey=function(b,d,c){return b+"__"+d+"__"+c;};ep.utilities.buildAjaxRequestPath=function(i,h){var d=document.getElementById("__sid");var g=document.getElementById("__vid");i=i.replace(/^\//,"");var e=ep.utilities.getBaseRequestPath()+i;if(h&&h.Db&&h.Term&&h.Tag){var b=ep.utilities.buildRouteKey(h.Db,h.Term,h.Tag);e=e+"/"+ep.utilities.urlSafeEncodeBase64(b);}var c=d?d.value:ep.sid;var f=g?g.value:ep.vid;if(c){e+="?sid="+c;if(f&&parseInt(f,10)!==-1){e+="&vid="+f;}}return e;};ep.utilities.buildBaseViewPortRoute=function(j,i,h){var d=document.getElementById("__sid");var g=document.getElementById("__vid");j=j.replace(/^\//,"");var e=ep.utilities.getBaseRequestPath()+j;if(i&&i.Db&&i.Term&&i.Tag){var b=ep.utilities.buildRouteKey(i.Db,i.Term,i.Tag);e=e+"/"+ep.utilities.urlSafeEncodeBase64(b);}e+="/"+h;var c=d?d.value:ep.sid;var f=g?g.value:ep.vid;if(c){e+="/"+c;if(f&&parseInt(f,10)!==-1){e+="/"+f;}}e+="/";return e;};ep.utilities.buildAjaxRequestPathWithNewReturn=function(d,c){var b=ep.utilities.buildAjaxRequestPath(d,c);if(ep.newReturnUrl){b+="&ReturnUrl="+encodeURIComponent(ep.newReturnUrl);}return b;};ep.utilities.buildAjaxRequestPathWithExistingReturn=function(d,c){var b=ep.utilities.buildAjaxRequestPath(d,c);if(ep.existingReturnUrl){b+="&ReturnUrl="+encodeURIComponent(ep.existingReturnUrl);}return b;};ep.utilities.encodeRecordkey=function(b){return encodeURIComponent(b);};ep.utilities.isEmptyObj=function(c){for(var b in c){if(c.hasOwnProperty(b)){return false;}}return true;};ep.utilities.formatNumber=function(b){b+="";x=b.split(".");x1=x[0];x2=x.length>1?"."+x[1]:"";var c=/(\d+)(\d{3})/;while(c.test(x1)){x1=x1.replace(c,"$1,$2");}return x1+x2;};ep.utilities.urlSafeEncodeBase64=function(l){var m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var n="";var b,c,d,f,g,h,j;var k=0;l=ep.utilities._utf8_encode(l);while(k<l.length){b=l.charCodeAt(k++);c=l.charCodeAt(k++);d=l.charCodeAt(k++);f=b>>2;g=((b&3)<<4)|(c>>4);h=((c&15)<<2)|(d>>6);j=d&63;if(isNaN(c)){h=j=64;}else{if(isNaN(d)){j=64;}}n=n+m.charAt(f)+m.charAt(g)+m.charAt(h)+m.charAt(j);}var o=n.replace(/\+/g,"-").replace(/\//g,"_");var e=0;if(o.match(/\=/g)){e=o.match(/\=/g).length;}return o.replace(/\=/g,"")+e;};ep.utilities.urlSafeDecodeBase64=function(k){var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var m="";var b,c,d;var e,f,g,h;var j=0;k=k.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(j<k.length){e=l.indexOf(k.charAt(j++));f=l.indexOf(k.charAt(j++));g=l.indexOf(k.charAt(j++));h=l.indexOf(k.charAt(j++));b=(e<<2)|(f>>4);c=((f&15)<<4)|(g>>2);d=((g&3)<<6)|h;m=m+String.fromCharCode(b);if(g!==64){m=m+String.fromCharCode(c);}if(h!==64){m=m+String.fromCharCode(d);}}m=ep.utilities._utf8_decode(m);return m;};ep.utilities._utf8_encode=function(e){e=e.replace(/\r\n/g,"\n");var f="";for(var d=0;d<e.length;d++){var b=e.charCodeAt(d);if(b<128){f+=String.fromCharCode(b);}else{if((b>127)&&(b<2048)){f+=String.fromCharCode((b>>6)|192);f+=String.fromCharCode((b&63)|128);}else{f+=String.fromCharCode((b>>12)|224);f+=String.fromCharCode(((b>>6)&63)|128);f+=String.fromCharCode((b&63)|128);}}}return f;};ep.utilities._utf8_decode=function(b){};ep.utilities.bidiSanitizeContent=function(b){var c="div, em, strong, cite, abbr, acronym, sub, sup, span, a, p, h1, h2, h3, h4, h5, h6, pre, q, ins, del, dt, dd, li, label, option, legend, button, caption, strong";if(_.isString(b)){var d=jQuery(b);d.find(c).bidi();return d.html();}else{if(_.isElement(b)){jQuery(b).find(c).bidi();}}};ep.utilities.runQueryStringMethod=function(){var g=(window.location.search.indexOf("%u")!==-1)?unescape(window.location.search):window.location.search;var e=g.toQueryParams().runquerystringmethod;if(e){var d=e.split("_");if(d.length>1){var b=a("#"+d[0]);var c=d[1];if(b&&b.length&&b[c]){var f=d.length>2?d[2]:null;if(f&&f.length){ep.subscribe(f,function(){b[c]();},true);}else{b[c]();}}}}};ep.utilities.getDateObj=function(m,l){if(m){var c=l||"mm/dd/yyyy";var e=/[^mdyMDY]/.exec(c)[0];var f=c.split(e);var b=m.split(e);if(b.length<3){return false;}var g,d,h;for(var j=0,k=f.length;j<k;j++){if(/m|M/.test(f[j])){g=b[j];}if(/d|D/.test(f[j])){d=b[j];}if(/y|Y/.test(f[j])){h=b[j];}}if(g>0&&g<13&&h&&h.length===4&&d>0&&d<=(new Date(h,g,0)).getDate()){return new Date(h,g-1,d);}}return null;};ep.utilities.validateSession=function(){var c=location.href.split("/"+ep.interfaceId+"/")[0]+"/ValidateSessionAndUser";var b=false;a.ajax({url:c,data:"theSessionOnly=true&sid="+a("#__sid").val(),dataType:"JSON",type:"POST",async:false}).done(function(d){if(d.IsUserAndSessionValidToUse){b=true;}});return b;};ep.utilities.getQueryParams=function(f){var e={},d=f.split("&"),b;for(var c=0;c<d.length;c++){b=d[c].split("=");e[b[0]]=b[1];}return e;};})(jQuery);Number.prototype.px=function(){return parseInt(this,10)+"px";};Number.isNumeric=function(a){return !isNaN(parseFloat(a))&&isFinite(a);};Number.numOrDefault=function(b,a){return ep.utilities.isNumeric(b)?b:(a||0);};(function(a){var f="folderLargeOn.gif";var e="folderLargeOff.gif";var d,b,g=0;if(!ep.folder){ep.folder={};}ep.folder.removeCurrentFolderItem=function(m,p,q,o,n){ep.debug("ep/updatefolder.js -> removeCurrentFolderItem");var k=ep.utilities.replaceEPCommand("removeinternalfolderitem");var l=a.ajax({url:k,type:"POST",data:{DB:m,UITag:p,UITerm:q,Title:o}}).done(function(r,t,s){ep.folder.updateCitationPage();});};ep.folder.updateCitationPage=function(){ep.debug("ep/updatefolder.js -> updateCitationPage");var k=ep.utilities.getCommand();if(k!=="detail"&&k!=="removeinternalfolderitem"&&k!=="citation"){return;}location.replace(ep.utilities.getAction());};ep.folder.removeFolderItem=function(m,p,q,o,n){ep.debug("ep/updatefolder.js -> removeFolderItem");var k=ep.utilities.replaceEPCommand("removeinternalfolderitem");var l=a.ajax({url:k,type:"POST",data:{DB:m,UITag:p,UITerm:q,Title:o},dataType:"xml"}).done(ep.folder.addRemoveItemComplete);ep.folder.updateResultList(m,p,q,o,n);};ep.folder.updateResultList=function(s,v,w,u,t){ep.debug("ep/updatefolder.js -> updateResultList");var l=ep.utilities.getCommand();if(l!=="results"&&l!=="resultsadvanced"){return;}var k=1;var n=ep.folder.getFolderData(k);while(n.length&&k<t){if(typeof n==="object"){n=JSON.stringify(n);}var o=ep.folder.escapeAndParseJson(n);var m=o.db;var q=o.uiTag;var r=o.uiTerm;var p=o.title;if(s===m&&v===q&&w===r&&u){ep.folder.toggleAddToFolderIcon(k,false);break;}k++;n=ep.folder.getFolderData(k);}};ep.folder.getFolderData=function(k){ep.debug("ep/updatefolder.js -> getFolderData");k=parseInt(k,10);if(!Number.isNumeric(k)){return null;}return a("#add_"+k).data("folder");};ep.folder.toggleFolderItem=function(A,x,B,C){ep.debug("ep/updatefolder.js -> toggleFolderItem");var m="";var v="";var w="";var u="";var r="";var y=false;var n="";var s="";var o="";var k="";var l=false;var z=true;if(C!==undefined&&C===false){z=false;}if(A!==null&&A!==""){var p=a("#add_"+A);if(p===null){y=true;r=A;}else{var t=p.data("folder");if(typeof t==="object"){t=JSON.stringify(t);}var q=ep.folder.escapeAndParseJson(t);m=q.db;v=q.uiTag;w=q.uiTerm;u=q.title;r=q.resultID;n=q.doid;s=q.segid;o=q.ebookFormat;k=q.abookFormat;l=q.companyFormat;}}else{if(A===null&&B===null){throw"Invalid request.  theItemID and theJsonString cannot both be null";}if(typeof B==="object"){B=JSON.stringify(B);}B=ep.folder.escapeAndParseJson(B);m=B.db?B.db:B.DB;v=B.uiTag?B.uiTag:B.UITag;w=B.uiTerm?B.uiTerm:B.UITerm;u=B.title?B.title:B.Title;r=B.resultID?B.resultID:B.ResultID;o=B.aEbook?B.aEbook:false;k=B.aAbook?B.aAbook:false;if(B.aCompany){l=B.aCompany;}else{if(B.ContentType){l=B.ContentType==="Company Information"?true:false;}}}if(A!==null){ep.folder.toggleAddToFolderIcon(A,x);}ep.folder.addRemoveFolderItemRequest(m,v,w,n,s,r,u,y,x,z,o,k,l);};ep.folder.addRemoveFolderItemRequest=function(s,x,y,t,v,u,w,q,p,r,n,k,l){ep.debug("ep/updatefolder.js -> addRemoveFolderItemRequest");var m=ep.utilities.replaceEPCommand("addremovefolderitem");var o=a.ajax({url:m,type:"POST",data:{DB:s,UITag:x,UITerm:y,DOID:t,SegID:v,ResultID:u,Title:w,IsExternalItem:q,AddToFolder:p,RenderFolderControl:r,EbookFormat:n,AbookFormat:k,CompanyFormat:l},dataType:"xml"}).done(ep.folder.addRemoveItemComplete);};ep.folder.toggleAddToFolderIcon=function(p,o){ep.debug("ep/updatefolder.js -> toggleAddToFolderIcon");var k=a("#add_"+p);var l=a("#added_"+p);var m=a("#lnkAddToFolderImage"),n=a("#lnkAddToFolderImageEmpty");if(o==="true"||o===true){if(k&&l){k.hide();l.show();}if(m&&n){n.hide();m.show();}}else{if(k&&l){l.hide();k.show();}if(m&&n){m.hide();n.show();}}};ep.folder.addRemoveItemComplete=function(q){ep.debug("ep/updatefolder.js -> addRemoveItemComplete");var o=q;if(o===null){return false;}var l=ep.utilities.selectSingleNode(o,"EPResponse/ControlHtml");var k=l!==null?ep.utilities.getXmlElementValue(l):null;if(k!==null){ep.folder.updateFolderItemsControl(k);}var n=ep.utilities.selectSingleNode(o,"EPResponse/NumberOfFolderItems");var m=ep.utilities.getXmlElementValue(n);if(m!==null){g=m;ep.folder.updateToolbarFolderControl();}var p=a("body");if(p.hasClass("column2-empty")&&parseInt(m,10)>0){p.removeClass("column2-empty");if(p.hasClass("column2-closed")){p.removeClass("column2-closed").addClass("column2-open");}}};ep.folder.updateFolderItemsControl=function(l){ep.debug("ep/updatefolder.js -> updateFolderItemsControl");var k=a("#folderItemsContainerControl");if(k!==null){k.html(l);}};ep.folder.updateToolbarFolderControl=function(){ep.debug("ep/updatefolder.js -> updateToolbarFolderControl");var l=a("#toolbarFolder");if(!l){return;}var k=l.find("a").first();if(!k){k=l.find(".folder-control, .folder-control-empty").first();}k.removeClass().addClass("link color-s1");if(g>0){k.addClass("folder-control");k.attr("title",ep.messages.folderHasItemsTitle);}else{k.addClass("folder-control-empty");k.attr("title",ep.messages.folderHasNoItemsTitle);}};ep.folder.updateToolbarFolderCount=function(k){ep.debug("ep/updatefolder.js -> updateToolbarFolderCount");if(k){g++;}else{g--;}ep.folder.updateToolbarFolderControl();};function j(){ep.debug("ep/updatefolder.js -> UpdateMainFolderStyles");var l=a("#toolbarFolder");if(!l){return;}var k=l.find("a").first();if(!k){k=l.find(".folder-control, .folder-control-empty").first();}k.removeClass().addClass("link color-s1");if(k){if(g>0){k.addClass("folder-control");k.attr("title",ep.messages.folderHasItemsTitle);}else{k.addClass("folder-control-empty");k.attr("title",ep.messages.folderHasNoItemsTitle);}}}function i(){ep.debug("ep/updatefolder.js -> UpdateMainFolderImage");var k;var l=a("#folderHasItemsHeader");if(l.length){k=l.children().first();}var m="";if(k){if(g>0){m=FolderHasItems;k.html(m).removeClass().addClass("link folder_items_main");}else{m=FolderHasNoItems;k.html(m).removeClass().addClass("link folder_empty_main");}}}ep.folder.addAll=function(){ep.debug("ep/updatefolder.js -> addAll");var l=a("[name='addToFolder']");if(l===null||l===undefined||!l.length){return;}var m="";a.each(l,function(r,s){var q=a(this);var o=q.data("folder");if(!o){return;}var p=o.resultID;var n=q.attr("data-contenttype");if(n&&n==="companyinfo"){p=q.data("itemid");if(o&&(q.is(":checked"))){if(q.attr("data-isAdded")&&q.attr("data-isAdded")==="true"){return;}else{q.attr("data-isAdded",true);}}else{return;}}else{ep.folder.toggleAddToFolderIcon(p,true);}m+=ep.folder.generateItemXml(p);});if(a.trim(m)!==""){var k="<Items>"+m+"</Items>";ep.folder.addAllXML(k);setTimeout(ep.dialog.ToggledPopup.closeDialog,1000);}};ep.folder.addAllXML=function(m){var k=ep.utilities.replaceEPCommand("addallfolderitems");var l=a.ajax({url:k,type:"POST",data:{ItemsXML:m},dataType:"xml"}).done(ep.folder.addRemoveItemComplete);};ep.folder.generateItemXml=function(t){ep.debug("ep/updatefolder.js -> generateItemXml");if(t===null){return null;}var o=ep.folder.getFolderData(t);if(!o){return ep.folder.generateExternalSourceItemXml(t);}var m="";var s="";var n="";var k="";var r="";var l="";if(typeof o==="object"){o=JSON.stringify(o);}var p=ep.folder.escapeAndParseJson(o);if(p.doid!==undefined&&o!==null){m=p.doid;}if(p.segid!==undefined&&p.segid!==null){s=p.segid;}if(p.resultID!==undefined&&p.resultID!==null){r=p.resultID;}if(p.ebookFormat!==undefined&&p.ebookFormat!==null){n=p.ebookFormat;}if(p.abookFormat!==undefined&&p.abookFormat!==null){k=p.abookFormat;}if(p.companyFormat!==undefined&&p.companyFormat!==null){l=p.companyFormat;}var q='<Item Db="'+p.db+'" UITerm="'+p.uiTerm+'" DOID="'+m+'" SegID="'+s+'" IsEbookFormat="'+n+'" IsAbookFormat="'+k+'" IsCompanyFormat="'+l+'" UITag="'+p.uiTag+'" ResultID="'+r+'"><Title><![CDATA['+p.title+"]]></Title></Item>";return q;};ep.folder.generateExternalSourceItemXml=function(l){ep.debug("ep/updatefolder.js -> generateExternalSourceItemXml");var k='<Item ResultID="'+l+'"></Item>';return k;};ep.folder.SwapFolderImages=function(k){ep.debug("ep/updatefolder.js -> SwapFolderImages");if(k){a("#resultListInnerDiv").find(".item-not-in-folder").each(function(){this.addClass("item-saving-to-folder");});}else{a("#resultListInnerDiv").find(".item-not-in-folder").each(function(){this.removeClass("item-saving-to-folder").removeClass("item-not-in-folder").removeClass("item-in-folder");});}};function h(){ep.debug("ep/updatefolder.js -> SwapAllStyles");var k=a("[name='addToFolder']");a.each(k,function(l,m){ep.folder.swapItemStyle(a(this).attr("id").match(/\d+/)[0],true);});}ep.folder.addToFolderExternal=function(v,u){ep.debug("ep/updatefolder.js -> addToFolderExternal");if(v===null||v.length===0){return;}if(u===null||u.length===0){return;}var m=parent.frames[0].frameElement;if(m===null){return;}var n=m.contentDocument;if(!n){try{n=m.contentWindow.document;}catch(t){return;}}var o=n.getElementById(v);if(o===null){return;}var q=a(o).val().replace(/\n/g,"");if(q===null||q.length===0){return;}var p=ep.folder.escapeAndParseJson(q);var l=a(n.body).find(".item-not-in-folder").first();var r=a(n.body).find(".item-in-folder").first();var k=ep.utilities.replaceEPCommand("addremovefolderitem");var s=a.ajax({url:k,type:"POST",data:{DB:p.db,UITag:p.uiTag,UITerm:p.uiTerm,ResultID:p.resultID,Title:p.title,IsExternalItem:false,AddToFolder:u,RenderFolderControl:false}}).done(function(w){if(u){l.hide();r.show();}else{l.show();r.hide();}});};ep.folder.selectDeselectAll=function(n){ep.debug("ep/updatefolder.js -> selectDeselectAll");if(n===null||n===undefined){return;}var m=a(n).is(":checked");ep.folder.showHideLoadingImage(m,true);ep.folder.updateFolderSelectedItemsPage(m);var k=ep.utilities.replaceEPCommand("Folder/SelectFolderItems");var l=a.ajax({url:k,type:"POST",data:{theIsSelectAll:m},dataType:"json"}).done(function(o,q,p){ep.folder.selectFolderItemsComplete(o,m);});};ep.folder.showHideLoadingImage=function(o,p){ep.debug("ep/updatefolder.js -> showHideLoadingImage");var l=a("#imgLoadingContainer");var q=a(o?"#selectingContainer":"#deselectingContainer");var n=a("#selectDeselectContainer");var m="no-display";var k="folder-select-deselect-container";if(p){n.removeClass().addClass(m);q.removeClass().addClass(k);l.removeClass().addClass(k);}else{n.removeClass().addClass(k);q.removeClass().addClass(m);l.removeClass().addClass(m);}};ep.folder.updateFolderSelectedItemsPage=function(n){ep.debug("ep/updatefolder.js -> updateFolderSelectedItemsPage");var m="folder-list-item";var l="folder-list-item-selected";if(n===false){m="folder-list-item-selected";l="folder-list-item";}var k=a("."+m);k.each(function(){var p=a(this);p.removeClass().addClass(l);var o=p.children().first().children().first();o.attr("checked",n);});};ep.folder.selectFolderItemsComplete=function(m,l){ep.debug("ep/updatefolder.js -> selectFolderItemsComplete");ep.folder.showHideLoadingImage(l,false);try{if(m!==null){ep.displayutilities.SelectedItems=m.SelectedItems;aSelectedFolderItemCount=m.SelectedItems.length;}}catch(k){}};ep.folder.folderItemsRefresh=function(){ep.debug("ep/updatefolder.js -> folderItemsRefresh");if(typeof EPWebServices!=="undefined"&&typeof EPWebServices.FolderWebService.FolderItemsRefresh==="function"){EPWebServices.FolderWebService.FolderItemsRefresh(window.GetSessionParms(),FolderItemsRefreshAjax);}return false;};ep.folder.escapeAndParseJson=function(m){var l;try{l=a.parseJSON(m);}catch(k){l=a.parseJSON(m.replace(/\\/g,"\\\\"));}return l;};function c(){a(".folder-toggle").on("click",function(k){k.preventDefault();if(ep.clientData.isShowAddFolderPopup){return;}var l=a(this).data("isaddtofolder");var m=a(this).data("folder");if(m){ep.folder.toggleFolderItem(m.resultID,l,m,null);}});}a(c);})(jQuery);(function(a,b){a.extend(b,(function(){var i={},j={},q=b.queues.instance||[],f=b.queues.dependencies||[],w="css/",x="javascript/",A="javascript/";function d(){if(window.loadFirebugConsole){window.loadFirebugConsole();}try{if(console.log.apply){console.log.apply(this,arguments);}else{console.log(Array.prototype.slice.call(arguments));}}catch(B){}}function r(I,J,H){if(!I){if(a.isFunction(H)){H(J);}return J||{};}var E=I.split("."),B=E.pop(),C=window,D,G=E.length,F=-1;for(;++F<G;){D=E[F];if(!C[D]){C[D]={};}C=C[D];}C=C[B]=J||{};if(a.isFunction(H)){H(C);}b.publish(I+":ready",C,true);return C;}function s(F,G,D,E){G.epId=F;var C;if(D){var B=h(D);if(!a.isFunction(B)){q.unshift(D);p(function(){y(F,G,D,E);});return;}return r(F,Class.create(B,G),E);}else{return r(F,Class.create(G),E);}}var y=jQuery.proxy(s,this);function t(E,C,F,D){var B=h(C);if(!a.isFunction(B)){q.unshift(C);p(function(){z(E,C,F,D);});return;}F.epId=E;F=a.extend(i[E]||{},F);return r(E,new B(F),D);}var z=jQuery.proxy(t,this);function h(G){if(!G){return;}var D=G.split("."),F=D.length,B=window,E,C;for(E=0;E<F;E++){C=D[E];if(!B[C]){return null;}B=B[C];}return B;}function g(F,D,E){if(!F){return;}if(typeof F==="string"){F={epId:F};}else{if(!F.epId){throw ("ep.getInstance called with invalid parameters");}}var B=F.epId;if(i[B]){F=a.extend(i[B],F);}F.callback=(F.callback||D||a.noop);i[B]=F;if(a.isArray(E)){f=f.concat(E);q.push(B);o();return;}var C=h(B);if(!C){if(!F.loading){F.loading=true;m(F.epId.split(".").join("/").toLowerCase()+".js");}q.push(B);return;}else{if(a.isFunction(C.updateProperties)){C.updateProperties(F);}else{a.extend(C,F);}F.callback.call(C);return C;}}function v(){var E=(b.bundles||b.pageScripts||[]),B=a('link[rel="stylesheet"]');B.each(function(){E.push(this.href);});var D=/(?:url\(').+(?='\);)/gi,C;B=a("style");B.each(function(){C=this.innerHTML.match(D)||[];a.each(C,function(H,I){E.push(I.replace("url('",""));});});var F,G=E.length;D=/\/(css|javascript)\//gi;while(G--){F=E[G];if(F.indexOf(b.baseImagePath)>-1){F=F.split(b.baseImagePath).pop().replace(D,"");}j[F]=true;}}function m(D,C){var B=C||a.noop;if(!j[D]){$LAB.script(b.getFullUrl(D,x)).wait(function(){j[D]=true;B();});}else{B();}setTimeout(o,50);}function n(D,C){var B=C||a.noop;a.ajax({url:b.getFullUrl(D,A)}).done(function(E){B(E);});setTimeout(o,50);}function k(F,E,B){if(!j[F]){F=b.getFullUrl(F,w);var C=document.createElement("link");C.setAttribute("rel","stylesheet");C.setAttribute("type","text/css");C.setAttribute("href",F);if(E&&typeof E==="string"){C.setAttribute("media",E);}var D=document.getElementsByTagName("head");if(D&&D.length>0){D[0].appendChild(C);j[F]=true;if(a.isFunction(B)){setTimeout(B,250);}}}else{if(a.isFunction(B)){B();}}}function p(C){if(!a.isFunction(C)){C=p;}if(q.length){var B=q.shift();g(B);setTimeout(C,50);}}function o(){if(!b.initialized){b.initialized=true;}if(f.length){var D=f.shift(),E=D,B,C;if(typeof E!=="string"){E=D.url;B=D.callback;C=D.media;}if(/\.css/.test(E)){k(E,C,B);}else{if(/\.js/.test(E)){m(E,B);}else{if(/\.html/.test(E)){n(E,B);}else{g(E);}}}setTimeout(o,50);}else{p();}}function u(D,C){var B=D;if(a.isArray(B)){B=D.pop();f=f.concat(D);}f.push(a.isFunction(C)?{url:B,callback:C}:B);if(b.initialized){o();}}function c(){var B="eptemplate/";b.templates=a('body script[type^="'+B+'"]');if(b.templates.length){u(["jquery/plugins/jquery.tmpl.js",b.brandingPath+"templates/js/eptemplate.js"]);}}function l(){var B=/defer-image\|(.+)/,C;a("[class*='defer-image']").each(function(D){C=B.exec(this.className||"");if(C&&C.length>1){this.src=C[1];this.className=a.trim(this.className.split(C[0]).join(""));}});}function e(){a("img[data-defer-image]").each(function(){this.src=a(this).data("defer-image");});}b.domLoad(function(){v();c();o();e();});return{registerClass:s,registerInstance:t,register:r,getInstance:g,require:u,loadImages:l,debug:(b.version==="1.0.0.0"?d:a.noop)};})());})(jQuery,ep);(function(a){var e=a(),j=250,i;function h(){e=b();if(e.length&&!e.parent().length){a("body").append(e);}i=setTimeout(d,j);}function d(){if(e.parent().length){e.detach();}}function b(){return e||(a("#epAjaxActive").length?a("#epAjaxActive"):a('<div id="epAjaxActive" />'));}function c(){return e.html()||(ep.messages||{}).Loading||"Loading...";}function f(){e=b();e.html(c()).ajaxSend(h).ajaxComplete(d);h();}function g(){e.remove();e=null;}a(window).load(d);a(document).ready(f);a(window).unload(g);})(jQuery);(function(a){var b={};this.parseJTemplate=function c(g,d){var f=b[g];if(!f){var e="var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+g.replace(/[\r\t\n]/g," ").replace(/'(?=[^#]*#>)/g,"\t").split("'").join("\\'").split("\t").join("'").replace(/<#=(.+?)#>/g,"',$1,'").split("<#").join("');").split("#>").join("p.push('")+"');}return p.join('');";f=new Function("obj",e);b[g]=f;}return f(d);};})(jQuery);(function(a){ep.register("ep.util.JSON",(function(){function b(c){if(JSON&&JSON.stringify){return JSON.stringify(c);}}return{stringify:b};})());})(jQuery);var JSON;if(!JSON){JSON={};}(function(){function f(n){return n<10?"0"+n:n;}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null;};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf();};}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+string+'"';}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key);}if(typeof rep==="function"){value=rep.call(holder,key,value);}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null";}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null";}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v;}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v);}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v);}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v;}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" ";}}else{if(typeof space==="string"){indent=space;}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify");}return str("",{"":value});};}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v;}else{delete value[k];}}}}return reviver.call(holder,key,value);}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4);});}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j;}throw new SyntaxError("JSON.parse");};}}());(function(a){ep.register("ep.util.iframe",(function(){function g(k,i,j){if(j>35){return;}var h=b(k);if(h==="complete"){i();return;}setTimeout(function(){g(k,i,j+1);},100);}function b(n){var j=a(n);var l="epNotReady";if(j&&j.length){var k=j[0];if(k&&k.readyState){l=k.readyState;}}if(l==="epNotReady"){var h=[];try{h=j.contents();}catch(m){h=null;}if(h&&h.length){var i=h[0];if(i&&i.readyState){l=i.readyState;}}}return l;}var c=false;function d(i,h){if(!c||h>25){c=false;return;}i.focus();setTimeout(function(){d(i,h+1);},100);}function e(h){a(document).bind("focusin.focusfix",function(i){if(i.target.tagName==="IFRAME"){a(document).unbind("focusin.focusfix");a(document).bind("click.focusfix keydown.focusfix",function(){f();});a(document).bind("focusin.focusfix",function(j){if(j.target!==h){f();}});c=true;d(h,1);}});}function f(){c=false;a(document).unbind(".focusfix");}return{pdfReady:function(i,h){g(i,h,0);},preventPdfFocus:function(h){e(h);}};})());})(jQuery);(function(a){ep.registerClass("ep.base.Controller",{loaded:false,loading:false,initialize:function(b){a.extend(this,b);ep.domLoad(a.proxy(this._domLoaded,this));ep.windowLoad(a.proxy(this._windowLoaded,this));a(window).unload(a.proxy(this._windowUnLoaded,this));},_domLoaded:function(){var c=a.browser.msie,b=parseInt(a.browser.version,10),d=(c&&(b<=8))?true:false;if(d&&document.getElementsByClassName){document.getElementsByClassName=undefined;}if(!this.loaded){this.onDomLoad();this.loaded=true;}},_windowLoaded:function(){this.onLoad();},_windowUnLoaded:function(){this.onUnload();},onDomLoad:a.noop,onLoad:a.noop,onUnload:a.noop});})(jQuery);ep.registerClass("ep.base.PageController",{loader:null,query:{},initialize:function($super,a){$super(a);},_domLoaded:function($super){$super();},_windowLoaded:function($super){$super();}},"ep.base.Controller");ep.registerClass("ep.base.ModuleController",{loadMarkup:false,markupUrl:null,containerId:null,container:[],onUpdate:jQuery.noop,ModuleJson:null,updateMethod:"get",initialize:function($super,a){$super(a);},_domloaded:function($super){this.container=jQuery("#"+this.containerId);$super();if(this.loadMarkup){this.update();}},_windowUnLoaded:function($super){this.container=[];$super();},updateProperties:function(a){jQuery.extend(this,a);if(a.containerId){this.container=jQuery("#"+this.containerId);}},update:function(c,b,a){c=c||this.params||{};jQuery.extend(this,c);this.container=jQuery("#"+(a?a:this.containerId));b=this.markupUrl||b;if(!this.container.length){throw ("ep.base.ModuleController.load called without a valid containerId [containerId: "+(a||this.containerId)+"]. ");}if(!b){throw ("ep.base.ModuleController.load called without a valid markupUrl [markupUrl: "+b+"]. ");}jQuery.ajax({url:b,type:this.updateMethod.toUpperCase(),data:c,context:this,beforeSend:this.onBeforeSend,success:this.onSuccess,error:this.onError,traditional:true});},onBeforeSend:function(){this.loaded=false;this.loading=true;},onSuccess:function(a,b,c){this.ModuleJson=jQuery.parseJSON(c.getResponseHeader("X-JSON"));ep.debug("ModuleController:onSuccess");this.loaded=true;this.loading=false;this.container.html(a);this.container.trigger("Module_updated",[this]);this.onUpdate();if(this.container.length&&this.container.parent().length){this.container.parent().show();}this.params=null;},onError:function(c,b,a){ep.debug(a);}},"ep.base.Controller");ep.register("ep.manager.ClientStateManager",function(a){var d="ClientState";function c(e,g,f,h){a.ajax({url:ep.utilities.replaceEPCommand(d+"/"+e),data:{theGroup:g,theComponent:f.id,theValue:h}}).done(function(i){b(f,"updated",i);}).fail(function(i){b(f,"failed",i);});}function b(e,g,f){a(e).trigger("ep_manager_ClientStateManager_"+g);}return{setBool:function(f,e,g){c("UpdateBool",f,e,g);}};}(jQuery));ep.register("ep.util.expandcollapse");(function(a){var i="collapse-content",j="."+i+",[data-"+i+"]",m="collapse-toggle",n="."+m+",[data-"+m+"]",k="active",b="disableexpandcollapse",o=0;function e(t){var s=null,r=t.data(i);if(r){if(r.trigger){s=f(r.trigger);}else{if(typeof r==="string"){s=f(r);}}return s;}else{if(t.prevAll(n).first().length){s=t.prevAll(n).first();}else{if(t.parents(n).first().length){s=t.parents(n).first();}}}return s;}function d(t){var s=null,r=t.data(m);if(r){if(r.target){return f(r.target);}else{if(typeof r==="string"){return f(r);}}}if(t.nextAll(j).first().length){s=t.nextAll(j).first();}else{if(t.children(j).first().length){s=t.children(j).first();}}return s;}function f(s){var r=(s.indexOf("#")>-1)||(s.indexOf(".")>-1)?a(s):a("#"+s);return r.length?r:null;}function c(u){var s,t,r=false;if(u.hasClass(m)||u.data(m)){t=u;s=d(t);}else{if(u.hasClass(i)||u.data(i)){s=u;t=e(s);}}if((t&&t.data(b)==="true")||(s&&s.data(b)==="true")){r=true;}if(s){s.data("trigger",t);t.data("target",s);}return{trigger:t,target:s,isDisabled:r};}function q(w,v,u){function s(y){var x;if(!a(y.target).closest(j).length&&!a(y.target).hasClass(m)&&!a(y.target).parent().hasClass(m)){if(v.is(":visible")){x=c(v.closest("li").find("a"));if(x.target&&x.trigger){x.target.toggle();q(x.trigger,x.target);}}}}if(!w||!v){return;}var t=(u===true)?true:v.is(":visible");w[t?"addClass":"removeClass"](k);var r=w.data(m);if(!r||!(r.onText||r.offText)){l(t,ep.messages.hide_this_area,ep.messages.show_this_area,w,{titleOnly:true});}else{if(r){l(t,r.onText,r.offText,w,r);}}v.attr("aria-expanded",function(x,z){var y;if(z==="true"){y="false";}else{if(z==="false"){y="true";}}return y;});w.attr("aria-expanded",v.attr("aria-expanded"));if(t){a("body").on("click",s);}else{a("body").off("click",s);}w.trigger("toggled");}function l(r,t,s,v,u){if(t&&r&&v.attr("title")===s){g(t,v,u);}else{if(s&&!r&&v.attr("title")===t){g(s,v,u);}}}function g(t,s,r){s.attr("title",t);if(r){if(!r.titleOnly){s.html(t);}if(r.toggleIcon){s.find(".icon-trigger").html(t);}}}function p(s,t){ep.debug("expandcollapse: update()");s.preventDefault();var r=c(a(this));if(!r.target||!r.trigger||r.isDisabled){return;}if(t===undefined){r.target.toggle();q(r.trigger,r.target);}else{r.target.toggle(t===true);q(r.trigger,r.target,(t===true));}r.target.trigger("toggled");}a(j).live("toggleVisibility",p);a(n).live("click",p);function h(t,s){var r;r=s.attr("aria-expanded");if(r==="true"||r==="false"){t.attr("id",function(u,v){if(!v){return"expandCollapseTrigger"+o;}});s.attr("id",function(u,v){if(!v){return"expandCollapseTarget"+o;}});o++;t.attr("aria-controls",function(u,v){if(!v){return s.attr("id");}});s.attr("aria-labelledby",function(u,v){if(!v){return t.attr("id");}});t.attr("title",function(u,v){if(!v){if(r==="true"){return ep.messages.hide_this_area;}else{if(r==="false"){return ep.messages.show_this_area;}}}});}}ep.util.expandcollapse.setupAria=h;a(function(){a(n).each(function(){var t=a(this),r=c(t),s=r.target;if(!r.target||!r.trigger||r.isDisabled){return;}h(t,s);});});})(jQuery);ep.registerInstance("ep.controller.CollapsibleController","ep.base.Controller",{containers:[],stateManager:null,openClass:"-open",closeClass:"-closed",toggleClass:"-toggle",containerClass:"collapsible",onDomLoad:function(){this.initContainers();if(this.containers.length){this.initStateManager();this.setEvents();}},initContainers:function(){this.containers=jQuery("."+this.containerClass);},initStateManager:function(){var a=ep.getInstance("ep.manager.ClientStateManager");if(!a){jQuery(document).bind("ep_manager_ClientStateManager_ready",jQuery.proxy(this.onStateManagerReady,this));}else{this.stateManager=a;}},onStateManagerReady:function(a){this.stateManager=a.memo;},setEvents:function(){this.containers.each(jQuery.proxy(function(a,b){jQuery(b).click(jQuery.proxy(function(c){this.containerClickHandler(c,b);},this));this.setToggleMessage(b);},this));},containerClickHandler:function(c,b){var a=jQuery(c.target);if(a.hasClass(this.containerClass+this.toggleClass)){c.preventDefault();this.toggle(b);}},toggle:function(b){jQuery(document.body).toggleClass(b.id+this.openClass);jQuery(document.body).toggleClass(b.id+this.closeClass);var a=this.getIsOpen(b);jQuery(b).trigger({type:"collapsible_toggled",data:{state:a}});this.setToggleMessage(b);if(this.stateManager){this.stateManager.setBool(this.page,b,a);}jQuery(window).trigger("resize.truncation");},getIsOpen:function(a){return jQuery(document.body).hasClass(a.id+this.openClass);},setToggleMessage:function(b){if(ep.messages[b.id+this.openClass]&&ep.messages[b.id+this.closeClass]){var a=this.getIsOpen(b);jQuery(b).find("."+this.containerClass+this.toggleClass).each(jQuery.proxy(function(c,d){d.title=ep.messages[b.id+(a?this.openClass:this.closeClass)];},this));}}});(function(a){ep.register("ep.controller.control.OptionsControlsDropdowns");var b=ep.controller.control.OptionsControlsDropdowns;var c=function(e){e.addClass("active");};var d=function(e){e.removeClass("active");};b.init=function(){var e=a("#optionsControls"),g=e.find(".collapse-content");g.on("toggled",function(k){var l=a(this),m=l.data("trigger"),h=e,j=h.find(".collapse-toggle"),i=h.find(".collapse-content").not(l);d(j);c(m);i.hide();if(!l.is(":visible")){d(m.add(j));}});a(".dd-menu").hover(function(i){var h=a(this);if(i.type==="mouseleave"){h.removeClass("hover");}else{h.addClass("hover");}});a(".dd-menu").on("focus",function(){var h=a(this);h.addClass("hover");});a(".dd-menu").on("blur",function(){var h=a(this);h.removeClass("hover");});var f=a("#alertSaveShareWrapper");if(f.length>0){f.find(".add-all-side").on("click",function(){setTimeout(function(){f.trigger("toggleVisibility");},1500);});}};})(jQuery);/* http://mths.be/placeholder v2.0.7 by @mathias */
(function(l,d,a){var f="placeholder" in d.createElement("input"),g="placeholder" in d.createElement("textarea"),i=a.fn,k=a.valHooks,e,h;if(f&&g){h=i.placeholder=function(){return this;};h.input=h.textarea=true;}else{h=i.placeholder=function(){var m=this;m.filter((f?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":c,"blur.placeholder":j}).data("placeholder-enabled",true).trigger("blur.placeholder");return m;};h.input=f;h.textarea=g;e={get:function(n){var m=a(n);return m.data("placeholder-enabled")&&m.hasClass("placeholder")?"":n.value;},set:function(n,o){var m=a(n);if(!m.data("placeholder-enabled")){return n.value=o;}if(o==""){n.value=o;if(n!=d.activeElement){j.call(n);}}else{if(m.hasClass("placeholder")){c.call(n,true,o)||(n.value=o);}else{n.value=o;}}return m;}};f||(k.input=e);g||(k.textarea=e);a(function(){a(d).delegate("form","submit.placeholder",function(){var m=a(".placeholder",this).each(c);setTimeout(function(){m.each(j);},10);});});a(l).bind("beforeunload.placeholder",function(){a(".placeholder").each(function(){this.value="";});});}function b(m){var n={},o=/^jQuery\d+$/;a.each(m.attributes,function(q,p){if(p.specified&&!o.test(p.name)){n[p.name]=p.value;}});return n;}function c(n,p){var o=this,m=a(o);if(o.value==m.attr("placeholder")&&m.hasClass("placeholder")){if(m.data("placeholder-password")){m=m.hide().next().show().attr("id",m.removeAttr("id").data("placeholder-id"));if(n===true){return m[0].value=p;}m.focus();}else{o.value="";m.removeClass("placeholder");o==d.activeElement&&o.select();}}}function j(){var o,r=this,m=a(r),n=m,q=this.id;if(r.value==""){if(r.type=="password"){if(!m.data("placeholder-textinput")){try{o=m.clone().attr({type:"text"});}catch(p){o=a("<input>").attr(a.extend(b(this),{type:"text"}));}o.removeAttr("name").data({"placeholder-password":true,"placeholder-id":q}).bind("focus.placeholder",c);m.data({"placeholder-textinput":o,"placeholder-id":q}).before(o);}m=m.removeAttr("id").hide().prev().attr("id",q).show();}m.addClass("placeholder");m[0].value=m.attr("placeholder");}else{m.removeClass("placeholder");}}}(this,document,jQuery));(function(a){if(!Modernizr.input.placeholder){a(function(){a("input, textarea").placeholder();});}})(jQuery);(function(a){if(window.XDomainRequest){jQuery.ajaxTransport(function(b){if(b.crossDomain&&b.async){if(b.timeout){b.xdrTimeout=b.timeout;delete b.timeout;}var c;return{send:function(d,f){function e(i,j,h,g){c.onload=c.onerror=c.ontimeout=jQuery.noop;c=undefined;f(i,j,h,g);}c=new XDomainRequest();c.onload=function(){e(200,"OK",{text:c.responseText},"Content-Type: "+c.contentType);};c.onerror=function(){e(404,"Not Found");};c.onprogress=jQuery.noop;c.ontimeout=function(){e(0,"timeout");};c.timeout=b.xdrTimeout||Number.MAX_VALUE;c.open(b.type,b.url);c.send((b.hasContent&&b.data)||null);},abort:function(){if(c){c.onerror=jQuery.noop;c.abort();}}};}});}})(jQuery);if(!("withCredentials" in (new XMLHttpRequest()))&&!window.XDomainRequest){jQuery.ajaxPrefilter(function(b,a){if(b.crossDomain&&b.async){return"jsonp";}});}(function(a){var b={enter:13};a(function(){var c=a("[data-form-submit]");c.each(function(){var d=a(this);d.keydown(function(f){if(f.which===b.enter){var e=d.find('input[type="submit"]').first();if(document.activeElement.id==="SearchTerm1-clear"){return;}f.preventDefault();e.click();}});});});})(jQuery);(function(a){if(!("XPathEvaluator" in window)){a.ajaxPrefilter("xml",function(c,d,b){c.xhrFields=_.extend({responseType:"msxml-document"},c.xhrFields);});}})(jQuery);if(ep.clientData.googleTagManagerId){(function(o,a,m,h,e){o[h]=o[h]||[];var r=a.getElementsByTagName(m),c=r[0],g=a.createElement(m),b=h!="dataLayer"?"&l="+h:"",p=true;g.async=true;g.src="//www.googletagmanager.com/gtm.js?id="+e+b;for(var q=0;q<r.length;q++){var k=r[q];if(k.src.indexOf(g.src)>-1){p=false;break;}}if(p){o[h].push({"gtm.start":new Date().getTime(),event:"gtm.js"});c.parentNode.insertBefore(g,c);}})(window,document,"script","dataLayer",ep.clientData.googleTagManagerId);}(function(a){var b;function c(h){if(typeof h==="string"&&h.length){return h.indexOf("=")>-1?h.toQueryParams():{anchor:h};}return a.isPlainObject(h)?h:{};}function f(k){if(!k){return;}var h=c(location.hash.substr(1)),j=a.isEmptyObject(h),i=location.href;k=c(k);a.extend(h,k);h="#"+a.param(h);if(h!==location.hash){ep.debug("updateHash:",k);i=location.hash.length?i.replace(/#.*/,h):i+h;location.replace(i);}ep.publish("ep:util:url:hashUpdated");}function e(h){if(!h||!a("#"+h+',[name="'+h+'"]').length){return;}ep.debug("updateAnchor:",h);if(h!==b){f({anchor:h});}b=h;g(h);}function g(i){var h=a("#"+i+',[name="'+i+'"]');if(h.length){ep.publish("anchorscroll",i);ep.debug("updateScroll:",i);setTimeout(function(){if(a.isFunction(h.scrollAndExpand)){h.scrollAndExpand();}else{window.scrollTo(0,h.offset().top);}},10);}}ep.register("ep.util.url",{updateHash:f,updateAnchor:e});a('a[href^="#"]').live("click",function(h){h.preventDefault();if(this.hash&&this.hash.length){e(this.hash.substr(1).replace(/\./g,"\\."));}});function d(){a(window).unbind("hashchange",d);ep.debug("onhashchange:",location.hash);if(location.hash&&location.hash!=="#"){b=location.hash.substr(1).toQueryParams().anchor;e(b);}}a(window).bind("hashchange",d);a(function(){a(window).trigger("hashchange");});})(jQuery);(function(a){a(function(){var c=a('input[id$="logoLink"]'),b=ep.utilities.buildAjaxRequestPath("Search/GoToNewSearch");c.click(function(){window.top.location=b;return false;});});})(jQuery);(function(a){a.extend(a.fn,{validate:function(c){if(!this.length){c&&c.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing");return;}var d=a.data(this[0],"validator");if(d){return d;}this.attr("novalidate","novalidate");d=new a.validator(c,this[0]);a.data(this[0],"validator",d);if(d.settings.onsubmit){var b=this.find("input, button");b.filter(".cancel").click(function(){d.cancelSubmit=true;});if(d.settings.submitHandler){b.filter(":submit").click(function(){d.submitButton=this;});}this.submit(function(e){if(d.settings.debug){e.preventDefault();}function f(){if(d.settings.submitHandler){if(d.submitButton){var g=a("<input type='hidden'/>").attr("name",d.submitButton.name).val(d.submitButton.value).appendTo(d.currentForm);}d.settings.submitHandler.call(d,d.currentForm);if(d.submitButton){g.remove();}return false;}return true;}if(d.cancelSubmit){d.cancelSubmit=false;return f();}if(d.form()){if(d.pendingRequest){d.formSubmitted=true;return false;}return f();}else{d.focusInvalid();return false;}});}return d;},valid:function(){if(a(this[0]).is("form")){return this.validate().form();}else{var b=true;var c=a(this[0].form).validate();this.each(function(){b&=c.element(this);});return b;}},removeAttrs:function(c){var d={},b=this;a.each(c.split(/\s/),function(e,f){d[f]=b.attr(f);b.removeAttr(f);});return d;},rules:function(c,b){var e=this[0];if(c){var i=a.data(e.form,"validator").settings;var j=i.rules;var f=a.validator.staticRules(e);switch(c){case"add":a.extend(f,a.validator.normalizeRule(b));j[e.name]=f;if(b.messages){i.messages[e.name]=a.extend(i.messages[e.name],b.messages);}break;case"remove":if(!b){delete j[e.name];return f;}var g={};a.each(b.split(/\s/),function(k,l){g[l]=f[l];delete f[l];});return g;}}var d=a.validator.normalizeRules(a.extend({},a.validator.metadataRules(e),a.validator.classRules(e),a.validator.attributeRules(e),a.validator.staticRules(e)),e);if(d.required){var h=d.required;delete d.required;d=a.extend({required:h},d);}return d;}});a.extend(a.expr[":"],{blank:function(b){return !a.trim(""+b.value);},filled:function(b){return !!a.trim(""+b.value);},unchecked:function(b){return !b.checked;}});a.validator=function(c,b){this.settings=a.extend(true,{},a.validator.defaults,c);this.currentForm=b;this.init();};a.validator.format=function(c,b){if(arguments.length==1){return function(){var d=a.makeArray(arguments);d.unshift(c);return a.validator.format.apply(this,d);};}if(arguments.length>2&&b.constructor!=Array){b=a.makeArray(arguments).slice(1);}if(b.constructor!=Array){b=[b];}a.each(b,function(d,e){c=c.replace(new RegExp("\\{"+d+"\\}","g"),e);});return c;};a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:true,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:true,ignore:":hidden",ignoreTitle:false,onfocusin:function(b,c){this.lastActive=b;if(this.settings.focusCleanup&&!this.blockFocusCleanup){this.settings.unhighlight&&this.settings.unhighlight.call(this,b,this.settings.errorClass,this.settings.validClass);this.addWrapper(this.errorsFor(b)).hide();}},onfocusout:function(b,c){if(!this.checkable(b)&&(b.name in this.submitted||!this.optional(b))){this.element(b);}},onkeyup:function(b,c){if(b.name in this.submitted||b==this.lastElement){this.element(b);}},onclick:function(b,c){if(b.name in this.submitted){this.element(b);}else{if(b.parentNode.name in this.submitted){this.element(b.parentNode);}}},highlight:function(b,c,d){if(b.type==="radio"){this.findByName(b.name).addClass(c).removeClass(d);}else{a(b).addClass(c).removeClass(d);}},unhighlight:function(b,c,d){if(b.type==="radio"){this.findByName(b.name).removeClass(c).addClass(d);}else{a(b).removeClass(c).addClass(d);}}},setDefaults:function(b){a.extend(a.validator.defaults,b);},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:a.validator.format("Please enter no more than {0} characters."),minlength:a.validator.format("Please enter at least {0} characters."),rangelength:a.validator.format("Please enter a value between {0} and {1} characters long."),range:a.validator.format("Please enter a value between {0} and {1}."),max:a.validator.format("Please enter a value less than or equal to {0}."),min:a.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:false,prototype:{init:function(){this.labelContainer=a(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||a(this.currentForm);this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var c=(this.groups={});a.each(this.settings.groups,function(e,f){a.each(f.split(/\s/),function(g,h){c[h]=e;});});var d=this.settings.rules;a.each(d,function(e,f){d[e]=a.validator.normalizeRule(f);});function b(e){var g=a.data(this[0].form,"validator"),f="on"+e.type.replace(/^validate/,"");g.settings[f]&&g.settings[f].call(g,this[0],e);}a(this.currentForm).validateDelegate("[type='text'], [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",b).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",b);if(this.settings.invalidHandler){a(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler);}},form:function(){this.checkForm();a.extend(this.submitted,this.errorMap);this.invalid=a.extend({},this.errorMap);if(!this.valid()){a(this.currentForm).triggerHandler("invalid-form",[this]);}this.showErrors();return this.valid();},checkForm:function(){this.prepareForm();for(var c=0,b=(this.currentElements=this.elements());b[c];c++){this.check(b[c]);}return this.valid();},element:function(b){b=this.validationTargetFor(this.clean(b));this.lastElement=b;this.prepareElement(b);this.currentElements=a(b);var c=this.check(b);if(c){delete this.invalid[b.name];}else{this.invalid[b.name]=true;}if(!this.numberOfInvalids()){this.toHide=this.toHide.add(this.containers);}this.showErrors();return c;},showErrors:function(b){if(b){a.extend(this.errorMap,b);this.errorList=[];for(var c in b){this.errorList.push({message:b[c],element:this.findByName(c)[0]});}this.successList=a.grep(this.successList,function(d){return !(d.name in b);});}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors();},resetForm:function(){if(a.fn.resetForm){a(this.currentForm).resetForm();}this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass);},numberOfInvalids:function(){return this.objectLength(this.invalid);},objectLength:function(d){var b=0;for(var c in d){b++;}return b;},hideErrors:function(){this.addWrapper(this.toHide).hide();},valid:function(){return this.size()==0;},size:function(){return this.errorList.length;},focusInvalid:function(){if(this.settings.focusInvalid){try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin");}catch(b){}}},findLastActive:function(){var b=this.lastActive;return b&&a.grep(this.errorList,function(c){return c.element.name==b.name;}).length==1&&b;},elements:function(){var c=this,b={};return a(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&c.settings.debug&&window.console&&console.error("%o has no name assigned",this);if(this.name in b||!c.objectLength(a(this).rules())){return false;}b[this.name]=true;return true;});},clean:function(b){return a(b)[0];},errors:function(){return a(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext);},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=a([]);this.toHide=a([]);this.currentElements=a([]);},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers);},prepareElement:function(b){this.reset();this.toHide=this.errorsFor(b);},check:function(d){d=this.validationTargetFor(this.clean(d));var i=a(d).rules();var b=false;for(var f in i){var h={method:f,parameters:i[f]};try{var g=a.validator.methods[f].call(this,d.value.replace(/\r/g,""),d,h.parameters);if(g=="dependency-mismatch"){b=true;continue;}b=false;if(g=="pending"){this.toHide=this.toHide.not(this.errorsFor(d));return;}if(!g){this.formatAndAdd(d,h);return false;}}catch(c){this.settings.debug&&window.console&&console.log("exception occured when checking element "+d.id+", check the '"+h.method+"' method",c);throw c;}}if(b){return;}if(this.objectLength(i)){this.successList.push(d);}return true;},customMetaMessage:function(b,d){if(!a.metadata){return;}var c=this.settings.meta?a(b).metadata()[this.settings.meta]:a(b).metadata();return c&&c.messages&&c.messages[d];},customMessage:function(d,c){var b=this.settings.messages[d];return b&&(b.constructor==String?b:b[c]);},findDefined:function(){for(var b=0;b<arguments.length;b++){if(arguments[b]!==undefined){return arguments[b];}}return undefined;},defaultMessage:function(b,c){return this.findDefined(this.customMessage(b.name,c),this.customMetaMessage(b,c),!this.settings.ignoreTitle&&b.title||undefined,a.validator.messages[c],"<strong>Warning: No message defined for "+b.name+"</strong>");},formatAndAdd:function(b,d){var c=this.defaultMessage(b,d.method),e=/\$?\{(\d+)\}/g;if(typeof c=="function"){c=c.call(this,d.parameters,b);}else{if(e.test(c)){c=jQuery.format(c.replace(e,"{$1}"),d.parameters);}}this.errorList.push({message:c,element:b});this.errorMap[b.name]=c;this.submitted[b.name]=c;},addWrapper:function(b){if(this.settings.wrapper){b=b.add(b.parent(this.settings.wrapper));}return b;},defaultShowErrors:function(){for(var d=0;this.errorList[d];d++){var c=this.errorList[d];this.settings.highlight&&this.settings.highlight.call(this,c.element,this.settings.errorClass,this.settings.validClass);this.showLabel(c.element,c.message);}if(this.errorList.length){this.toShow=this.toShow.add(this.containers);}if(this.settings.success){for(var d=0;this.successList[d];d++){this.showLabel(this.successList[d]);}}if(this.settings.unhighlight){for(var d=0,b=this.validElements();b[d];d++){this.settings.unhighlight.call(this,b[d],this.settings.errorClass,this.settings.validClass);}}this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show();},validElements:function(){return this.currentElements.not(this.invalidElements());},invalidElements:function(){return a(this.errorList).map(function(){return this.element;});},showLabel:function(b,d){var c=this.errorsFor(b);if(c.length){c.removeClass(this.settings.validClass).addClass(this.settings.errorClass);c.attr("generated")&&c.html(d);}else{c=a("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(b),generated:true}).addClass(this.settings.errorClass).html(d||"");if(this.settings.wrapper){c=c.hide().show().wrap("<"+this.settings.wrapper+"/>").parent();}if(!this.labelContainer.append(c).length){this.settings.errorPlacement?this.settings.errorPlacement(c,a(b)):c.insertAfter(b);}}if(!d&&this.settings.success){c.text("");typeof this.settings.success=="string"?c.addClass(this.settings.success):this.settings.success(c);}this.toShow=this.toShow.add(c);},errorsFor:function(b){var c=this.idOrName(b);return this.errors().filter(function(){return a(this).attr("for")==c;});},idOrName:function(b){return this.groups[b.name]||(this.checkable(b)?b.name:b.id||b.name);},validationTargetFor:function(b){if(this.checkable(b)){b=this.findByName(b.name).not(this.settings.ignore)[0];}return b;},checkable:function(b){return/radio|checkbox/i.test(b.type);},findByName:function(c){var b=this.currentForm;return a(document.getElementsByName(c)).map(function(e,d){return d.form==b&&d.name==c&&d||null;});},getLength:function(c,b){switch(b.nodeName.toLowerCase()){case"select":return a("option:selected",b).length;case"input":if(this.checkable(b)){return this.findByName(b.name).filter(":checked").length;}}return c.length;},depend:function(c,b){return this.dependTypes[typeof c]?this.dependTypes[typeof c](c,b):true;},dependTypes:{"boolean":function(c,b){return c;},string:function(c,b){return !!a(c,b.form).length;},"function":function(c,b){return c(b);}},optional:function(b){return !a.validator.methods.required.call(this,a.trim(b.value),b)&&"dependency-mismatch";},startRequest:function(b){if(!this.pending[b.name]){this.pendingRequest++;this.pending[b.name]=true;}},stopRequest:function(b,c){this.pendingRequest--;if(this.pendingRequest<0){this.pendingRequest=0;}delete this.pending[b.name];if(c&&this.pendingRequest==0&&this.formSubmitted&&this.form()){a(this.currentForm).submit();this.formSubmitted=false;}else{if(!c&&this.pendingRequest==0&&this.formSubmitted){a(this.currentForm).triggerHandler("invalid-form",[this]);this.formSubmitted=false;}}},previousValue:function(b){return a.data(b,"previousValue")||a.data(b,"previousValue",{old:null,valid:true,message:this.defaultMessage(b,"remote")});}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},dateDE:{dateDE:true},number:{number:true},numberDE:{numberDE:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(b,c){b.constructor==String?this.classRuleSettings[b]=c:a.extend(this.classRuleSettings,b);},classRules:function(c){var d={};var b=a(c).attr("class");b&&a.each(b.split(" "),function(){if(this in a.validator.classRuleSettings){a.extend(d,a.validator.classRuleSettings[this]);}});return d;},attributeRules:function(c){var e={};var b=a(c);for(var d in a.validator.methods){var f;if(d==="required"&&typeof a.fn.prop==="function"){f=b.prop(d);}else{f=b.attr(d);}if(f){e[d]=f;}else{if(b[0].getAttribute("type")===d){e[d]=true;}}}if(e.maxlength&&/-1|2147483647|524288/.test(e.maxlength)){delete e.maxlength;}return e;},metadataRules:function(b){if(!a.metadata){return{};}var c=a.data(b.form,"validator").settings.meta;return c?a(b).metadata()[c]:a(b).metadata();},staticRules:function(b){var c={};var d=a.data(b.form,"validator");if(d.settings.rules){c=a.validator.normalizeRule(d.settings.rules[b.name])||{};}return c;},normalizeRules:function(c,b){a.each(c,function(e,f){if(f===false){delete c[e];return;}if(f.param||f.depends){var d=true;switch(typeof f.depends){case"string":d=!!a(f.depends,b.form).length;break;case"function":d=f.depends.call(b,b);break;}if(d){c[e]=f.param!==undefined?f.param:true;}else{delete c[e];}}});a.each(c,function(e,d){c[e]=a.isFunction(d)?d(b):d;});a.each(["minlength","maxlength","min","max"],function(){if(c[this]){c[this]=Number(c[this]);}});a.each(["rangelength","range"],function(){if(c[this]){c[this]=[Number(c[this][0]),Number(c[this][1])];}});if(a.validator.autoCreateRanges){if(c.min&&c.max){c.range=[c.min,c.max];delete c.min;delete c.max;}if(c.minlength&&c.maxlength){c.rangelength=[c.minlength,c.maxlength];delete c.minlength;delete c.maxlength;}}if(c.messages){delete c.messages;}return c;},normalizeRule:function(b){if(typeof b=="string"){var c={};a.each(b.split(/\s/),function(){c[this]=true;});b=c;}return b;},addMethod:function(d,c,b){a.validator.methods[d]=c;a.validator.messages[d]=b!=undefined?b:a.validator.messages[d];if(c.length<3){a.validator.addClassRules(d,a.validator.normalizeRule(d));}},methods:{required:function(e,b,c){if(!this.depend(c,b)){return"dependency-mismatch";}switch(b.nodeName.toLowerCase()){case"select":var d=a(b).val();return d&&d.length>0;case"input":if(this.checkable(b)){return this.getLength(e,b)>0;}default:return a.trim(e).length>0;}},remote:function(g,c,d){if(this.optional(c)){return"dependency-mismatch";}var e=this.previousValue(c);if(!this.settings.messages[c.name]){this.settings.messages[c.name]={};}e.originalMessage=this.settings.messages[c.name].remote;this.settings.messages[c.name].remote=e.message;d=typeof d=="string"&&{url:d}||d;if(this.pending[c.name]){return"pending";}if(e.old===g){return e.valid;}e.old=g;var f=this;this.startRequest(c);var b={};b[c.name]=g;a.ajax(a.extend(true,{url:d,mode:"abort",port:"validate"+c.name,dataType:"json",data:b,success:function(j){f.settings.messages[c.name].remote=e.originalMessage;var l=j===true;if(l){var k=f.formSubmitted;f.prepareElement(c);f.formSubmitted=k;f.successList.push(c);f.showErrors();}else{var h={};var i=j||f.defaultMessage(c,"remote");h[c.name]=e.message=a.isFunction(i)?i(g):i;f.showErrors(h);}e.valid=l;f.stopRequest(c,l);}},d));return"pending";},minlength:function(d,b,c){return this.optional(b)||this.getLength(a.trim(d),b)>=c;},maxlength:function(d,b,c){return this.optional(b)||this.getLength(a.trim(d),b)<=c;},rangelength:function(e,b,d){var c=this.getLength(a.trim(e),b);return this.optional(b)||(c>=d[0]&&c<=d[1]);},min:function(d,b,c){return this.optional(b)||d>=c;},max:function(d,b,c){return this.optional(b)||d<=c;},range:function(d,b,c){return this.optional(b)||(d>=c[0]&&d<=c[1]);},email:function(c,b){return this.optional(b)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(c);},url:function(c,b){return this.optional(b)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(c);},date:function(c,b){return this.optional(b)||!/Invalid|NaN/.test(new Date(c));},dateISO:function(c,b){return this.optional(b)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(c);},number:function(c,b){return this.optional(b)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(c);},digits:function(c,b){return this.optional(b)||/^\d+$/.test(c);},creditcard:function(h,d){if(this.optional(d)){return"dependency-mismatch";}if(/[^0-9 -]+/.test(h)){return false;}var f=0,g=0,b=false;h=h.replace(/\D/g,"");for(var e=h.length-1;e>=0;e--){var c=h.charAt(e);var g=parseInt(c,10);if(b){if((g*=2)>9){g-=9;}}f+=g;b=!b;}return(f%10)==0;},accept:function(d,b,c){c=typeof c=="string"?c.replace(/,/g,"|"):"png|jpe?g|gif";return this.optional(b)||d.match(new RegExp(".("+c+")$","i"));},equalTo:function(e,b,c){var d=a(c).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){a(b).valid();});return e==d.val();}}});a.format=a.validator.format;})(jQuery);(function(a){var c={};if(a.ajaxPrefilter){a.ajaxPrefilter(function(f,d,g){var e=f.port;if(f.mode=="abort"){if(c[e]){c[e].abort();}c[e]=g;}});}else{var b=a.ajax;a.ajax=function(f){var d=("mode" in f?f:a.ajaxSettings).mode,e=("port" in f?f:a.ajaxSettings).port;if(d=="abort"){if(c[e]){c[e].abort();}return(c[e]=b.apply(this,arguments));}return b.apply(this,arguments);};}})(jQuery);(function(a){if(!jQuery.event.special.focusin&&!jQuery.event.special.focusout&&document.addEventListener){a.each({focus:"focusin",blur:"focusout"},function(d,b){a.event.special[b]={setup:function(){this.addEventListener(d,c,true);},teardown:function(){this.removeEventListener(d,c,true);},handler:function(f){arguments[0]=a.event.fix(f);arguments[0].type=b;return a.event.handle.apply(this,arguments);}};function c(f){f=a.event.fix(f);f.type=b;return a.event.handle.call(this,f);}});}a.extend(a.fn,{validateDelegate:function(b,d,c){return this.bind(d,function(e){var f=a(e.target);if(f.is(b)){return c.apply(f,arguments);}});}});})(jQuery);(function(a){a(function(){ep.require("jquery/plugins/jquery.validate-1.9.0.js",function(){jQuery.validator.addMethod("multiemail",function(e,d){if(this.optional(d)){return true;}var c;var b=e.split(new RegExp("\\s*;\\s*","gi"));isValid=true;for(c in b){if(b.hasOwnProperty(c)){isValid=isValid&&jQuery.validator.methods.email.call(this,b[c],d);}}return isValid;},(ep.messages.email_invalid_error)?ep.messages.email_invalid_error:"Please enter a valid email address.");a.validator.addMethod("html",function(c,b){return !/(<([^>]+)>)/ig.test(c);});a.validator.addMethod("followsDateFormat",function(d,b,c){if(!d){return true;}if(ep.utilities.getDateObj(d,c)){return true;}return false;});});});})(jQuery);(function(a){a.fn.cleanWhitespace=function(){this.contents().filter(function(){return(this.nodeType===3&&!/\S/.test(this.nodeValue));}).remove();return this;};})(jQuery);